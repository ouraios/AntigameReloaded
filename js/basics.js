var DOM={query:function(e,t){return"string"==typeof e?t?"object"==typeof t?t.querySelector(e):"id"===t?document.getElementById(e):document.getElementById(t)?document.getElementById(t).querySelector(e):null:document.querySelector(e):e},queryAll:function(e,t){return"string"==typeof e?(t||document).querySelectorAll(e):e&&"object"==typeof e&&"length"in e?e:[]},findParent:function(e,t,n,r){if((e=DOM.query(e,t))&&n)for(r=r||0;e&&0<=r;){if(e.id===n)return e;r--,e=e.parentNode}return null},iterate:function(e,t){var n;if(e&&"object"==typeof e&&"length"in e)for(n=0;n<e.length;n++)e[n]&&t(e[n])},iterateChildren:function(e,t){if(e)for(var n=e.firstChild;n;n=n.nextSibling)1===n.nodeType&&t(n)},hasChildren:function(e){return e&&e.children?e.children.length:0},getChildren:function(e,t){return e&&e.children?e.children[t]:null},getSelectedNode:function(e){return e&&e.options&&"selectedIndex"in e?e.options[e.selectedIndex]:null},getChildnodeByName:function(e,t){if(e&&e.children)for(var n=0;n<e.children.length;n++)if(e.children[n].tagName===t)return e.children[n];return null},prependChild:function(e,t){e&&t&&(e.childNodes.length?e.insertBefore(t,e.childNodes[0]):e.appendChild(t))},appendChild:function(e,t){e&&t&&e.appendChild(t)},before:function(e,t){e&&t&&e.parentNode.insertBefore(t,e)},after:function(e,t){e&&t&&(e.nextElementSibling?e.parentNode.insertBefore(t,e.nextElementSibling):e.parentNode.appendChild(t))},replaceChildren:function(e,t){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);t&&e.appendChild(t)}},removeChildren:function(e,t){var n;if(e)for(n=0;n<e.childNodes.length;n++)t&&e.childNodes[n].nodeType!==t||e.removeChild(e.childNodes[n])},create:function(e,t,n,r,i){var o;if(e=document.createElement(e),t)if("string"==typeof t)e.className=t;else for(o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);if(n)for(o in n)n.hasOwnProperty(o)&&(e.style[o]=n[o]);if(r)for(o in r)r.hasOwnProperty(o)&&e.addEventListener(o,r[o],!1);if(i)for(o in i)i.hasOwnProperty(o)&&(e[o]=i[o]);return e},append:function(e,t,n,r,i,o,a){var s;if(e=e?e.appendChild(document.createElement(t)):document.createElement(t),n)if("string"==typeof n)e.className=n;else for(s in n)n.hasOwnProperty(s)&&e.setAttribute(s,n[s]);if(r)for(s in r)r.hasOwnProperty(s)&&(e.style[s]=r[s]);if(i)for(s in i)i.hasOwnProperty(s)&&e.addEventListener(s,i[s],!1);if(o)for(s in o)o.hasOwnProperty(s)&&(e[s]=o[s]);return a&&e.setAttribute("ago-data",JSON.stringify(a)),e},appendDIV:function(e,t,n){var r;if(e=e?e.appendChild(document.createElement("div")):document.createElement("div"),t)if("string"==typeof t)e.className=t;else for(r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);if(n)for(r in n)n.hasOwnProperty(r)&&(e.style[r]=n[r]);return e},appendTABLE:function(e,t,n,r){var i;if((e=e?e.appendChild(document.createElement("table")):document.createElement("table")).style.tableLayout="fixed",t)if("string"==typeof t)e.className=t;else for(i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i]);if(n)for(i in n)n.hasOwnProperty(i)&&(e.style[i]=n[i]);if(r)for(t=e.appendChild(document.createElement("colgroup")),i=0;i<r.length;i++)t.appendChild(document.createElement("col")).style.width=r[i]+"px";return e},appendTR:function(e,t,n){var r;if(e=e?e.appendChild(document.createElement("tr")):document.createElement("tr"),t)if("string"==typeof t)e.className=t;else for(r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);return n&&e.setAttribute("ago-data","string"==typeof n?n:JSON.stringify(n)),e},appendTD:function(e,t,n,r,i){var o;if(e=e?e.appendChild(document.createElement("td")):document.createElement("td"),t)if("string"==typeof t)e.className=t;else for(o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);return(n=HTML.setText(n,r,i))&&(e.textContent=n),e},appendLI:function(e,t,n,r,i){var o;if(e=e?e.appendChild(document.createElement("li")):document.createElement("li"),t)if("string"==typeof t)e.className=t;else for(o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);return(n=HTML.setText(n,r,i))&&(e.textContent=n),e},appendSPAN:function(e,t,n,r,i){var o;if(e=e?e.appendChild(document.createElement("span")):document.createElement("span"),t)if("string"==typeof t)e.className=t;else for(o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);return(n=HTML.setText(n,r,i))&&(e.textContent=n),e},appendTEXT:function(e,t,n,r){(t=HTML.setText(t,n,r))&&e.appendChild(document.createTextNode(t))},appendIMG:function(e,t,n){var r;if(e=e?e.appendChild(document.createElement("img")):document.createElement("img"),t)if("string"==typeof t)e.src=t;else for(r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r]);if(n)if("string"==typeof t)e.style.width=e.style.height=n;else for(r in n)n.hasOwnProperty(r)&&(e.style[r]=n[r]);return e},appendA:function(e,t,n,r,i){var o;if(e=e?e.appendChild(document.createElement("a")):document.createElement("a"),t)if("string"==typeof t)e.className=t,e.href="javascript:void(0)";else for(o in t.href||(t.href="javascript:void(0)"),t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);else e.href="javascript:void(0)";if(r&&e.setAttribute("ago-data","string"==typeof r?r:JSON.stringify(r)),n)for(o in n)n.hasOwnProperty(o)&&e.addEventListener(o,n[o],!1);return i&&e.setAttribute("disabled","disabled"),e},appendSELECT:function(e,t,n,r,i){var o;if(e=e?e.appendChild(document.createElement("select")):document.createElement("select"),t)if("string"==typeof t)e.className=t;else for(o in t)t.hasOwnProperty(o)&&e.setAttribute(o,t[o]);if(i)for(o in i)i.hasOwnProperty(o)&&e.addEventListener(o,i[o],!1);for(o in n)n.hasOwnProperty(o)&&((t=e.appendChild(document.createElement("option"))).value=o,t.textContent=AGO.Label.get(n[o]).replace(/&lt;/g,"<"),r===o&&(e.selectedIndex=e.options.length-1));return e},appendSCRIPT:function(e,t){var n;e&&((n=document.createElement("script")).setAttribute("type","text/javascript"),n.textContent="string"==typeof e?e:"("+e.toString()+")();",document.head.appendChild(n),t&&document.head.removeChild(n))},set:function(e,t,n,r,i,o){var a;if(e=DOM.query(e,t)){if(n)for(a in n)n.hasOwnProperty(a)&&e.setAttribute(a,n[a]);if(r)for(a in r)r.hasOwnProperty(a)&&(e.style[a]=r[a]);if(i)for(a in i)i.hasOwnProperty(a)&&e.addEventListener(a,i[a],!1);if(o)for(a in o)o.hasOwnProperty(a)&&(e[a]=o[a])}},setAll:function(e,t,n,r,i,o){for(t=DOM.queryAll(e,t),e=0;e<t.length;e++)DOM.set(t[e],null,n,r,i,o)},getText:function(e,t,n){return e=DOM.query(e,t),HTML.getText(e?e.textContent:"",n)},getTextChild:function(e,t,n){var r;if((t=DOM.query(e,t))&&t.childNodes)for(e=0;e<t.childNodes.length&&(3!=+t.childNodes[e].nodeType||!(r=(t.childNodes[e].nodeValue||"").trim()));e++);return HTML.getText(r,n)},setText:function(e,t,n,r,i){(e=DOM.query(e,t))&&(9===r?e.innerHTML=n||"":e.textContent=HTML.setText(n,r,i))},updateText:function(e,t,n,r,i){return(e=DOM.query(e,t))&&(n=HTML.setText(n,r,i))!==e.textContent?(e.textContent=n,e):null},updateTextChild:function(e,t,n,r,i){if(e=DOM.query(e,t)){if(n=HTML.setText(n,r,i),3!=+e.firstChild.nodeType)return DOM.prependChild(e,document.createTextNode(n)),e;if(n!==e.firstChild.textContent)return e.firstChild.textContent=n,e}return null},getAttribute:function(e,t,n,r){return e=DOM.query(e,t),HTML.getText(e?e.getAttribute(n):"",r)},setAttribute:function(e,t,n,r,i){(e=DOM.query(e,t))&&e.setAttribute(n,HTML.setValue(r,i))},removeAttribute:function(e,t,n){(e=DOM.query(e,t))&&e.removeAttribute(n)},updateAttribute:function(e,t,n,r,i){return(e=DOM.query(e,t))&&(r=HTML.setValue(r,i),e.getAttribute(n)!==r)?(e.setAttribute(n,r),e):null},setData:function(e,t,n){(e=DOM.query(e,t))&&n&&e.setAttribute("ago-data","string"==typeof n?n:JSON.stringify(n))},getData:function(e,t,n){return DOM.getAttributeParent(e,t,"ago-data",-2,n)},getAttributeParent:function(e,t,n,r,i){if(e=DOM.query(e,t))for(i=i||0;e&&0<=i;){if(e.hasAttribute(n))return DOM.getAttribute(e,null,n,r);i--,e=e.parentNode}return HTML.getText("",r)},getProperty:function(e,t,n,r){return e=DOM.query(e,t),HTML.getText(e?e[n]:"",r)},setProperty:function(e,t,n,r,i){(e=DOM.query(e,t))&&(e[n]=HTML.setValue(r,i))},updateProperty:function(e,t,n,r,i){if((e=DOM.query(e,t))&&(r=HTML.setValue(r,i),e[n]!==r))return e[n]=r,e},updatePropertyAll:function(e,t,n,r,i){for(t=DOM.queryAll(e,t),e=0;e<t.length;e++)DOM.updateProperty(t[e],null,n,r,i)},getValue:function(e,t,n){return e=DOM.query(e,t),HTML.getText(e?e.value:"",n)},setValue:function(e,t,n,r,i){(e=DOM.query(e,t))&&(e.value=HTML.setValue(n,r),i&&DOM.trigger(e,null,i))},updateValue:function(e,t,n,r,i){return(e=DOM.query(e,t))&&(n=HTML.setValue(n,r))!==e.value?(e.value=n,i&&DOM.trigger(e,null,i),e):null},hasClass:function(e,t,n){return!!(e=DOM.query(e,t))&&HTML.hasClass(e.className,n)},updateClass:function(e,t,n){return(e=DOM.query(e,t))&&e.className!==(n||"")?(e.className=n||"",e):null},addClass:function(e,t,n){(t=DOM.query(e,t))&&n&&(-1===(e=(" "+(t.className||"").toLowerCase()+" ").indexOf(" "+n.toLowerCase().trim()+" "))&&(t.className=(t.className?t.className+" ":"")+n))},extendClass:function(e,t,n){(e=DOM.query(e,t))&&n&&(e.className=((e.className||"")+" "+n).trim())},removeClass:function(e,t,n){var r;(t=DOM.query(e,t))&&n&&(-1<(r=(" "+(t.className||"").toLowerCase()+" ").indexOf(" "+n.toLowerCase().trim()+" "))&&(e=0<r?t.className.slice(0,r).trim():"",n=t.className.slice(r+n.length).trim(),t.className=e+(e&&n?" ":"")+n))},removeClassGroup:function(e,t,n){(e=DOM.query(e,t))&&n&&((n=(e.className||"").replace(new RegExp("(^|\\s)"+n+"(\\w|_)*","g")," ").trim())!==e.className&&(e.className=n))},setClassGroup:function(e,t,n,r){(e=DOM.query(e,t))&&n&&((n=(e.className||"").replace(new RegExp("(^|\\s)"+n+"(\\w|_)*","g")," ").trim()+(r?" "+r:""))!==e.className&&(e.className=n))},setStyleColor:function(e,t,n){(e=DOM.query(e,t))&&(e.style.color=n||"")},setStyleDisplay:function(e,t,n){(e=DOM.query(e,t))&&(e.style.display=n||"none")},updateStyle:function(e,t,n,r){return(e=DOM.query(e,t))&&e.style[n]!==(r||"")?(e.style[n]=r||"",e):null},addObserver:function(e,t,n){var r;return e&&n&&(r=new window.MutationObserver(n))&&r.observe(e,t||{childList:!0}),r},removeObserver:function(e){try{e&&e.disconnect&&e.disconnect()}catch(e){}},click:function(e,t){DOM.trigger(e,t,"click")},trigger:function(e,t,n){(t=DOM.query(e,t))&&n&&("click"===n||"mouseup"===n||"mousedown"===n||"mouseover"===n||"mouseout"===n?((e=document.createEvent("MouseEvents")).initMouseEvent(n,!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(e)):"change"===n||"focus"===n||"blur"===n?((e=document.createEvent("HTMLEvents")).initEvent(n,!0,!1),t.dispatchEvent(e)):"keyup"===n&&("initKeyboardEvent"in(e=document.createEvent("KeyboardEvent"))?e.initKeyboardEvent("keyup",!0,!0,window,!1,!1,!1,!1,0,0):e.initKeyEvent("keyup",!0,!0,window,!1,!1,!1,!1,0,0),t.dispatchEvent(e)))},addEvents:function(e,t,n){var r;if(e=DOM.query(e,t))for(r in n)n.hasOwnProperty(r)&&e.addEventListener(r,n[r],!1)},addEventsAll:function(e,t,n){var r;for(t=DOM.queryAll(e,t),e=0;e<t.length;e++)for(r in n)n.hasOwnProperty(r)&&t[e].addEventListener(r,n[r],!1)},setFocus:function(e,t){var n=DOM.query(e,t);n&&n.focus()},disableAutocomplete:function(){AGO.Option.is("U41")&&window.setTimeout(function(){DOM.setAll("form",null,{autocomplete:"off"})},0)},disableActiveElement:function(e){if(AGO.Init.mobile&&document.activeElement)if("TEXTAREA"===document.activeElement.tagName||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type)if(VAL.check(AGO.App.page,"fleet1","fleet2"))DOM.setFocus("continue","id");else if("fleet3"===AGO.App.page)DOM.setFocus("start","id");else try{document.activeElement.blur()}catch(e){}else e||window.setTimeout(DOM.disableActiveElement,30,!0)},changeInput:function(e,t){var n,r;return!(e&&t&&(!AGO.isFirefox||AGO.Option.is("U41")))||(n=e.shiftKey&&e.ctrlKey?1e3:e.ctrlKey?100:e.shiftKey?10:1,r=DOM.getValue(t,null,2),r=38===e.keyCode?r+n:r-n,DOM.setValue(t,null,Math.max(r,0)),DOM.trigger(t,null,"keyup"),!1)}},HTML={getText:function(e,t){if(1===t)return Boolean(e);if(2===t)return NMR.parseIntFormat(e);if(3===t)return NMR.parseIntAbs(e);if(7===t)return(e||"").trim();if(-2!==t)return e||"";try{return JSON.parse(e||"{}")}catch(e){return{}}},setText:function(e,t,n){return t&&(e=2===t?STR.formatNumber(e):4===t?STR.formatNumber(e,!0):5===t?STR.shortNumber(e):3===t?e?STR.formatNumber(e):"0":7===t?STR.trim(e):8===t?STR.zero(e):10===t?AGO.Label.get(e):11===t?AGO.Label.get(e,1):12===t?AGO.Label.get(e,2):15===t?AGO.Time.format(e,n):16===t?AGO.Time.format(e,n,!0):17===t?AGO.Time.formatTimestamp(e,n):18===t?AGO.Time.formatTime(e):19===t?AGO.Time.formatTime(e,!0):e),e?e+"":""},setValue:function(e,t){return t&&(e=1===t?Boolean(e):7===t?STR.trim(e):8===t?STR.zero(e):-2===t?JSON.stringify(e||{}):e),e?e+"":""},urlImage:function(e){return AGO.App.pathSkin+"ago/images/"+e},urlMissionIcon:function(e){return AGO.App.pathSkin+"ago/images/task/mission-"+(e||0)+".gif"},urlTypeIcon:function(e,t){return AGO.App.pathSkin+"ago/images/task/type-"+(e||0)+(t||"a")+".gif"},hasClass:function(e,t){return-1<e.indexOf(t)},classMission:function(e){return"ago_color_M"+STR.trimZero(e,2)},classType:function(e){return AGO.Styles.classType[e]||""},classStatus:function(e){return 0<e?"ago_color_lightgreen":e<0?"ago_color_palered":"ago_color_orange"},classStatusData:function(e){return AGO.Styles.classStatusData[(e||0)+2]||""},colorStatusData:function(e){return AGO.Styles.colorStatusData[(e||0)+2]||""},color:function(e,t){return!e||4!==e.length&&7!==e.length?"":0<t&&t<100?"rgba("+(e=7===e.length?parseInt(e.substring(1,3),16)+","+parseInt(e.substring(3,5),16)+","+parseInt(e.substring(5,7),16):parseInt(e.substring(1,2),16)+","+parseInt(e.substring(2,3),16)+","+parseInt(e.substring(3,4),16))+(t<10?",0.0":",0.")+t+")":e},getPlayer:function(e,t,n){return(n?'<span class="honorRank '+AGO.Ogame.getHonorClass(n)+'">&nbsp;</span>':"")+'<span class="'+AGO.Token.getClass(t)+'">'+(e||"")+"</span>"}},OBJ={parse:function(e){if(e&&"object"==typeof e)return e;try{return JSON.parse(e||"{}")}catch(e){return{}}},split:function(e,t){var n,r,i,o={};for(n=STR.check(e).split(t||";"),i=0;i<n.length;i++)(r=(n[i]||"").split("="))[0]&&(o[r[0]]=r[1]||"");return o},create:function(e){var t,n={};if(e&&"object"==typeof e)for(t in e)"object"!=typeof e[t]&&(n[t]=e[t]);return n},createKey:function(e,t){var n={};return e&&(n[e]=t),n},copy:function(e,t){var n;if(e&&"object"==typeof e&&t&&"object"==typeof t)for(n in e)"object"!=typeof e[n]&&(t[n]=e[n])},is:function(e){return e&&"object"==typeof e},hasProperties:function(e){return e&&"object"==typeof e&&Object.keys(e).length},get:function(e,t){return e&&"object"==typeof e&&t in e?e[t]:""},set:function(e,t,n){e&&"object"==typeof e&&(e[t]=n)},iterate:function(e,t){if(e&&"object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&t(n)},iterateFilter:function(e,t,n){if(e&&"object"==typeof e)for(var r in e)e.hasOwnProperty(r)&&-1!==n.indexOf(r)&&t(r)},iterateArray:function(e,t){Array.isArray(e)&&e.forEach(t)}},VAL={choose:function(e){return 0<e?arguments[e]:""},select:function(e){for(var t=1;t<arguments.length;t++)if(e===arguments[t])return arguments[t]},check:function(e){for(var t=1;t<arguments.length;t++)if(e===arguments[t])return!0;return!1},status:function(e,t,n,r){return e<0?t:0<e?r:n}},NMR={minMax:function(e,t,n){return Math.max(Math.min(+e||0,n),t)},isMinMax:function(e,t,n){return t<=+e&&+e<=n},isGreater:function(e,t){return 0<+t&&+t<=+e},isLesser:function(e,t){return 0<+e&&+e<=+t},parseInt:function(e){return"string"==typeof e?parseInt(e,10):"number"==typeof e?Math.floor(e):0},parseIntFormat:function(e){return"string"==typeof e?+e.replace(/[^\d\-]/g,"")||0:"number"==typeof e?Math.floor(e):0},parseIntAbs:function(e){return"string"==typeof e?+e.replace(/[^\d]/g,"")||0:"number"==typeof e?Math.floor(Math.abs(e)):0},parseVersion:function(e){return(e=/(\d+)\D*(\d*)\D*(\d*)\D*(\d*)/.exec(e?e.toString():""))?parseInt(("00"+e[1]).slice(-2)+("00"+e[2]).slice(-2)+("00"+e[3]).slice(-2)+("00"+e[4]).slice(-2),10):0},parseIntShortcut:function(e){return(-1<(e=STR.check(e).toLowerCase()).indexOf("k")?1e3:1)*parseInt(e.replace(/[^\d]/g,""),10)}},STR={check:function(e){return"string"==typeof e?e:"number"==typeof e&&e?e+"":""},trim:function(e){return"string"==typeof e?e.trim():"number"==typeof e&&e?e+"":""},zero:function(e){return e?"string"==typeof e?e:"number"==typeof e?e+"":"0":"0"},trimZero:function(e,t){return(e="0000"+e).substr(e.length-t)},formatNumber:function(e,t){var n="";if(e){t&&(1e9<=Math.abs(e)?(e=Math.floor(e/1e6),n=" "+AGO.Label.is("KU0M")):1e6<=Math.abs(e)&&(e=Math.floor(e/1e3),n=" "+AGO.Label.is("KU0K")));for(var r=[],i=Math.abs(+e||0)+"";;){var o=i.slice(-3);if(!o)break;r.unshift(o),i=i.substr(0,i.length-o.length)}return(e<0?"-":"")+r.join(AGO.Label.is("KU0S"))+n}return""},shortNumber:function(e,t){var n,r;if(n=2===t?1:1===t?10:100,1e9<=e)n=Math.ceil(e/1e7/n)+"",r=AGO.Label.is("KU0B");else if(1e6<=e)n=Math.ceil(e/1e4/n)+"",r=AGO.Label.is("KU0M");else{if(!(1e3<=e))return e?e+"  ":"0  ";n=Math.ceil(e/10/n)+"",r=AGO.Label.is("KU0K")}return t?n.substr(0,n.length-t)+AGO.Label.is("KU0S")+n.substr(n.length-t)+" "+r:n+" "+r},getParameter:function(e,t){var n=decodeURIComponent(t||"").replace(/\?/g,"&").split("&"+e+"=")[1];return n&&n.split("&")[0].split("#")[0]||""},addParameter:function(e,t){return t=STR.trim(t),e&&t?"&"+e+"="+encodeURI(t):""},splitParameter:function(e){var t,n,r;if(e=decodeURIComponent(e||"").replace(/\?/g,"&").split("#")[0])for(t={},e=e.split("&"),r=0;r<e.length;r++)(n=(e[r]||"").split("="))[0]&&(t[n[0]]=n[1]||"");return t}};