if(!AGB)var AGB={};AGB.Manager={Start:function(){var e;AGB.status=1,AGB.Config.pathSkin=chrome.extension.getURL("/skin/"),AGB.Config.id=chrome.runtime.id,AGB.Config.version=chrome.runtime.getManifest().version,AGB.Config.name=STR.check(chrome.runtime.getManifest().name),AGB.Config.beta=-1<AGB.Config.name.indexOf("Alpha")?2:-1<AGB.Config.name.indexOf("Beta")?1:0,AGB.DataBase?AGB.DataBase.Start(window):AGB.DataBase={},AGB.Storage.Start(function(){e=1<AGB.Config.beta?"  - Development mode":"",e+=AGB.Storage.status?"  Storage Quota: local "+chrome.storage.local.QUOTA_BYTES+"  sync "+chrome.storage.local.QUOTA_BYTES:"  Something wrong with chrome.storage",AGB.Core.Log("Start  Storage: "+AGB.Storage.status+"  DataBase: "+AGB.DataBase.status+(e||""),!0)})},Check:function(e,t,o){OBJ.is(o)&&OBJ.is(t)&&"loading"===t.status&&(t=AGB.App.Check(o.url),OBJ.is(t)&&t.mode&&AGB.Manager.Load(t,e))},Load:function(e,t){1===e.mode&&chrome.tabs.executeScript(t,{file:"js/coordinates.js",runAt:"document_start"})},loadScripts:function(e,t){var o;if(OBJ.is(e)&&t)for(o=0;o<e.length;o++)e[o]&&chrome.tabs.executeScript(t,{file:"js/"+e[o]+".js",runAt:"document_start"})},message:function(e,o,a,r){var n;(n=AGB.App.getPlayer(e))&&chrome.tabs.query({url:"https://*.ogame.gameforge.com/*"},function(e){var t;for(t=0;t<e.length;t++)e[t]&&e[t].id&&chrome.tabs.sendMessage(e[t].id,{player:n,page:o,role:a,data:r})})}},chrome.tabs.onUpdated.addListener(AGB.Manager.Check),chrome.runtime.onMessage.addListener(function(t,e,o){if(o="function"==typeof o?o:null,(e="object"==typeof e&&e.tab?e.tab.id:"")&&"object"==typeof t&&("Log"===t.page?window.console.log("AntiGameOrigin:  "+t.para):"Storage"===t.page?"Set"===t.role?AGB.Storage.Set(t.para):"Get"===t.role?AGB.Storage.Get(t.para,o):"Remove"===t.role?AGB.Storage.Remove(t.para):"RemoveFilter"===t.role&&AGB.Storage.RemoveFilter(t.para,o):"Update"===t.page?"Check"===t.role&&chrome.runtime.requestUpdateCheck(function(e){AGB.Manager.message(t.para,"Menu","Install",e)}):t.page&&OBJ.is(AGB[t.page])&&"function"==typeof AGB[t.page].Messages&&AGB[t.page].Messages(t.role,t.para,o,e),o))return!0}),AGB.Storage={status:0,Start:function(t){var o;AGB.Storage.status=0,chrome.storage&&chrome.storage.local?(o=Math.floor(Date.now()/1e3),chrome.storage.local.set({App_Start:o},function(){chrome.storage.local.get(["App_Start"],function(e){AGB.Storage.status=OBJ.is(e)&&+e.App_Start===o?1:0,t()})})):t()},Set:function(e,t){var o,a;OBJ.is(e)&&(o=e.sync?"sync":"local",e.key?(a={})[e.key]=e.data:a=e.data,OBJ.is(a)&&Object.keys(a).length&&(t?chrome.storage[o].set(a,function(){t(chrome.runtime.lastError?-1:1)}):chrome.storage[o].set(a)))},Get:function(t,o){var e;OBJ.is(t)&&t.key&&o?(e=t.sync?"sync":"local",OBJ.is(t.key)?chrome.storage[e].get(Object.keys(t.key),o):chrome.storage[e].get(t.key,function(e){o(OBJ.is(e)&&e[t.key]||"")})):o&&o("")},Remove:function(e){var t;OBJ.is(e)&&e.key&&(t=e.sync?"sync":"local",AGB.Core.Log("Delete - storage  - "+e.key,!0),chrome.storage[t].remove(e.key))},List:function(t){OBJ.is(t)&&(chrome.storage.local.get(null,function(e){OBJ.iterate(e,function(e){t.filter&&0!==STR.check(e).indexOf(t.filter)||AGB.Core.Log("List - storage  - "+e,!0)})}),chrome.storage.sync.get(null,function(e){OBJ.iterate(e,function(e){t.filter&&0!==STR.check(e).indexOf(t.filter)||AGB.Core.Log("List - sync  - "+e,!0)})}))},RemoveFilter:function(t){OBJ.is(t)&&(chrome.storage.local.get(null,function(e){OBJ.iterate(e,function(e){t.filter&&0!==STR.check(e).indexOf(t.filter)||(AGB.Core.Log("Delete - storage  - "+e,!0),chrome.storage.local.remove(e))})}),chrome.storage.sync.get(null,function(e){OBJ.iterate(e,function(e){t.filter&&0!==STR.check(e).indexOf(t.filter)||(AGB.Core.Log("Delete - sync  - "+e,!0),chrome.storage.sync.remove(e))})}))},Sync:function(e){}};