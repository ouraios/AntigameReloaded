if(!AGB)var AGB={};AGB.Panel={Data:{},Messages:function(a,t,e){"Set"===a?AGB.Panel.Set(t):"ListAccount"===a&&AGB.Panel.ListAccount(t,e)},Init:function(a,t){var e,n,i,B;(B=AGB.App.getPlayer(a))&&(AGB.Panel.Data[B]={},e=AGB.Panel.Data[B],(n=OBJ.parse(t[AGB.Data.getKey(B,"Panel","Data")])).version!==AGB.Data.get("Panel","Data","version")&&(n={}),AGB.Data.iterate("Panel",function(a,t){a.tab&&(e[t]={},"label"in a&&(e[t].label=a.label||""),2<=a.tab&&(i=OBJ.is(n[t])?n[t]:[],e[t].status=+i[0]||0,e[t].data=STR.check(i[1])))}))},Save:function(a){var t,e,n;e=AGB.App.getPlayer(a),t=AGB.Panel.Data[e],AGB.Data.isStatus(e)&&t&&(a.backup||t.changed)&&(delete t.changed,n={version:AGB.Data.get("Panel","Data","version")},AGB.Data.iterate("Panel",function(a,t){2<=a.tab&&(n[t]=[AGB.Panel.get(e,t,"status"),AGB.Panel.get(e,t,"data",6)])}),a.save&&(a.save[e+"_Panel_Data"]=JSON.stringify(n)),a.backup&&AGB.Data.isBackup(e,"Panel","Data",2)&&(a.backup.Panel_Data=JSON.stringify(n)))},Cache:function(a,t){var e;e=AGB.App.getPlayer(a),AGB.Panel.Data[e]&&(AGB.Panel.Data[e].Cache=t)},ListAccount:function(a,t){var e,n,A;n=AGB.App.getPlayer(a),e=AGB.Panel.Data[n],n&&e&&((A={tab:"Account",statusColor:{}}).Units=a.planet&&"account"!==a.planet?AGB.Units.SummarizePosition(a):AGB.Units.SummarizeAccount(a),AGB.Units.iterate(n,function(a,t){var e,n=A.statusColor,i=+a.timeShip,B=+a.timeResource;i?e=3600<(i=AGB.Time.timestampMinute()-i)?4:60<i?5:6:B&&(e=3600<(i=AGB.Time.timestampMinute()-B)?1:60<i?2:3),n[t]=AGB.Styles.colorStatusUnits[e||0]||""})),t&&t(A)},Set:function(a){var t,e;e=AGB.App.getPlayer(a),t=AGB.Panel.Data[e],e&&t&&(e=AGB.Panel.getTab(a))&&a.key&&((OBJ.is(a.value)||t[e][a.key]!==a.value)&&(t.changed=!0,AGB.Data.Change()),t[e][a.key]=a.value)},get:function(a,t,e,n){return a=a&&AGB.Panel.Data[a]&&t&&AGB.Panel.Data[a][t]&&e?AGB.Panel.Data[a][t][e]:"",6===n?STR.check(a):+a||0},getActive:function(a,t,e,n){var i;return a&&AGB.Panel.Data[a]&&t&&AGB.Panel.Data[a][t]&&e&&(i=OBJ.get(AGB.Panel.Data[a][t].active,e)),6===n?STR.check(i):+i||0},getTab:function(a){return a.tab&&OBJ.is(AGB.Panel.Data[a.keyPlayer][a.tab])?a.tab:""}},AGB.Box={Data:{},Messages:function(a,t,e){"List"===a&&AGB.Box.List(t,e)},Init:function(a){var e;(a=AGB.App.getPlayer(a))&&(AGB.Box.Data[a]={},e=AGB.Box.Data[a],AGB.Data.iterate("Box",function(a,t){a.tab&&(e[t]={})}))},List:function(t,e){var n;(n=AGB.App.getPlayer(t,"copy"))&&AGB.Box.Data[n]?AGB.DataBase.GetPlayer(t,function(a){(a=a||{}).tab=t.tab,a.id=t.id,AGB.Box.Data[n].Cache=a,e&&e(a)}):e&&e()}};