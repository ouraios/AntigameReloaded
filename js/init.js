if(!AGO)var AGO={};AGO.versionOGameMax="5.7.99",-1<window.navigator.userAgent.indexOf("Firefox")?(AGO.isFirefox=!0,AGO.isPhone=-1<window.navigator.userAgent.indexOf("Mobile"),AGO.isTablet=-1<window.navigator.userAgent.indexOf("Tablet"),AGO.isMobile=AGO.isPhone||AGO.isTablet):-1<window.navigator.userAgent.indexOf("Chrome")&&(AGO.isChrome=!0),AGO.context=AGO.isFirefox?this:0,AGO.Page={Messages:function(e,t){AGO.dummy=e+t}};var PAGE={},AGB={messageFirefox:function(e,t,n,a){n&&(n.keyPlayer=AGO.App.keyPlayer,"function"==typeof a?API.Messages(e,t,JSON.stringify(n),function(e){a(JSON.parse(e))},"App"===e?AGO.context:null):API.Messages(e,t,JSON.stringify(n),null,"App"===e?AGO.context:null))},messageChrome:function(e,t,n,a){n&&(n.keyPlayer=AGO.App.keyPlayer,"function"==typeof a?chrome.runtime.sendMessage("",{page:e,role:t,para:n},null,a):chrome.runtime.sendMessage("",{page:e,role:t,para:n}))},Resource:function(e){var t;if(e=STR.check(e)){if(AGO.isFirefox)return API.Resource(e);try{return(t=new XMLHttpRequest).open("GET",chrome.extension.getURL(e),!1),t.overrideMimeType("text/plain"),t.send(null),t.responseText||""}catch(e){}}return""},Log:function(e,t){(AGO.App.beta||t)&&console.log("AntiGameOrigin:  "+e)}};AGO.Init={status:0,active:!1,KeydownCache:[],timing:Date.now(),loop:0,Messages:function(e,t,n){(AGO.Init.status||"Continue"===t)&&(Array.isArray(e)&&(e=-1<e.indexOf(AGO.App.Page)?AGO.App.Page:""),"Init"===e?"Timer"===t?window.setTimeout(AGO.Init.Timer,0):"Content"===t?AGO.Init.Content(n):"Ready"===t?AGO.Init.Ready():"Tooltip"===t&&AGO.Init.Tooltip(n):e&&AGO[e]&&"function"==typeof AGO[e].Messages&&AGO[e].Messages(t,n))},Start:function(){AGO.Init.status=0,document.location&&document.location.href&&document.documentElement?(AGB.message=AGO.isFirefox?AGB.messageFirefox:AGB.messageChrome,AGO.App.Start(),20<AGO.Notify.problem?document.addEventListener("DOMContentLoaded",AGO.Main.Run,!1):AGO.App.mode&&(AGO.Init.status=1,AGO.Init.active=document.hasFocus(),AGO.Observer.Start(),AGO.App.reload?AGO.Observer.Head(function(){AGO.App.Init(),AGO.Init.Init()}):(AGO.Option.Start(),AGO.Styles.Start(),AGO.Option.is("O04")&&(document.title=AGO.App.title),AGO.Observer.Head(function(){AGO.App.Init(),AGO.Styles.Init()}),AGO.Init.Init()))):++AGO.Init.loop<300&&window.setTimeout(AGO.Init.Start,AGO.Init.loop)},Init:function(){AGB.message("App","Start",{page:AGO.App.page,mode:AGO.App.mode,keyCom:AGO.App.keyCom,keyUni:AGO.App.keyUni,keyPlayer:AGO.App.keyPlayer,accountId:AGO.App.playerId,abbrCom:AGO.Uni.lang,abbrUni:AGO.Uni.abbr,urlUni:AGO.Uni.url,reload:AGO.App.reload},function(e){AGO.Observer.Head(function(){e&&AGO.App.mode&&1===AGO.Init.status&&(AGO.Init.status=2,AGO.App.reload=AGO.App.reload||e.reload,AGO.App.Page=e.Page,AGO.Background.Data=e.Background||{},AGO.Label.Init(e.Label),3<=AGO.App.mode&&e.keyPlayer===AGO.App.keyPlayer&&(OBJ.copy(e.App,AGO.App),OBJ.copy(e.Uni,AGO.Uni),AGO.Data.Init(),AGO.Option.Init(e.Option),AGO.Item.Init(e.Item),AGO.Panel.Init(e.Panel),AGO.DataBase.Init(e.DataBase),AGO.Box.Init(e.Box),AGO.Token.Init(e.Token),AGO.Units.Init(e.Units),AGO.Fleet.Init(e.Fleet),AGO.App.reload&&AGO.App.Save(),AGO.App.upgradeAvailable=NMR.parseVersion(AGO.App.versionAGO)<NMR.parseVersion(AGO.App.versionUpdate)),e=null,AGO.Observer.Body(AGO.Init.Read,AGO.isChrome&&3<=AGO.App.mode))})},AGO.context)},Read:function(){2===AGO.Init.status&&(AGO[AGO.App.Page]?(AGO.Init.status=4,PAGE=AGO.Page=AGO[AGO.App.Page],AGO.App.Ogame&&(AGO.Styles.Load(),AGO.Planets.Read(),AGO.Planets.status&&(AGO.App.mode=5,AGO.App.OgameMain=!0,AGO.Time.Read(),AGO.Units.Read(),AGO.Main.Read(),"function"==typeof PAGE.Read&&PAGE.Read())),AGO.Init.Run()):++AGO.Init.loop<100&&(AGB.Log("Init - Read - waiting for page script - loaded "+AGO.App.Page,!0),window.setTimeout(AGO.Init.Read,AGO.Init.loop)))},Run:function(){4===AGO.Init.status&&(AGO.Init.status=5,AGO.App.OgameMain&&(AGO.Units.Run(),AGO.Planets.Run(),AGO.Time.Run(),AGO.Events.Run(),"function"==typeof PAGE.Run&&PAGE.Run(),AGO.Panel.Run(),AGO.Notify.Run(),AGO.Main.Run()),AGO.Observer.Interactive(AGO.Init.Interactive))},Interactive:function(){5===AGO.Init.status&&(AGO.Init.status=6,AGO.Global.Interactive(),"function"==typeof PAGE.Interactive&&PAGE.Interactive(),AGO.App.Ogame?(AGO.Observer.mutationObject=DOM.addObserver(document.body,{childList:!0},AGO.Observer.Mutation),AGO.Global.message({role:"Ready"}),AGO.App.OgameMain&&(AGO.App.reload&&(AGO.Label.Update(),AGO.Units.Update()),AGB.message("App","Update",{reload:AGO.App.reload}),AGO.Notify.set("Notify"))):window.setTimeout(AGO.Init.Ready,20))},Ready:function(){6===AGO.Init.status&&(AGO.Init.status=7,AGO.App.OgameMain&&AGO.Events.Ready(),"function"==typeof PAGE.Ready&&PAGE.Ready(),AGO.Option.is("U31")&&OBJ.iterateArray(AGO.Init.KeydownCache,AGO.Init.onKeydown),AGO.App.Ogame&&(DOM.disableActiveElement(),DOM.disableAutocomplete()),window.setTimeout(AGO.Init.Complete,1))},Complete:function(){7===AGO.Init.status&&(!AGO.App.OgameMain||AGO.Units.status?(AGO.Init.status=8,"function"==typeof PAGE.Complete&&PAGE.Complete(),AGO.App.OgameMain&&(AGO.Main.Complete(),AGO.App.beta&&DOM.setStyleColor("playerName","id",AGO.App.reload?"#FF9600":"#008000"))):++AGO.Init.loop<100&&window.setTimeout(AGO.Init.Complete,AGO.Init.loop))},Refresh:function(){7<=AGO.Init.status&&AGO.App.OgameMain&&AGB.message("App","Refresh",{},function(e){AGO.Init.status&&e&&(AGO.Background.Data=e.Background||{},AGO.Option.Init(e.Option),AGO.Fleet.Init(e.Fleet),AGO.Box.Init(e.Box,!0),AGO.Panel.Init(e.Panel,!0))})},Content:function(e){var t,n,a;5<AGO.Init.status&&e&&e.page&&(n=e.page,(t=AGO[OBJ.get(AGO.App.Overlay,n)])?"function"==typeof t.Content&&(AGO.Init.activeOverlay||(a=document.querySelectorAll("body > .ui-dialog .ui-dialog-content")).length&&(AGO.Init.activeOverlay={element:a[a.length-1].id,page:DOM.getAttribute(a[a.length-1],null,"data-page").toLowerCase()}),AGO.Init.activeOverlay&&AGO.Init.activeOverlay.element&&n===AGO.Init.activeOverlay.page&&(a=document.getElementById(AGO.Init.activeOverlay.element))&&t.Content(a,AGO.Init.activeOverlay.element,n,e.url,e.para)):(t=AGO[OBJ.get(AGO.App.Content,n)])&&"function"==typeof t.Content&&t.Content(n,e.url,e.para,e.response))},Overlay:function(e,t){var n,a;5<AGO.Init.status&&e&&(a=DOM.getAttribute(e,null,"data-page").toLowerCase(),AGO.Init.activeOverlay={element:e.id,page:a},a?(n=OBJ.get(AGO.App.Overlay,a))&&AGO[n]&&"function"==typeof AGO[n].Overlay&&AGO[n].Overlay(e,e.id,a,t):"function"==typeof PAGE.Dialog&&PAGE.Dialog(e,e.id))},Tooltip:function(e){AGO.Menu&&document.getElementById("ago_menu")&&"function"==typeof AGO.Menu.Tooltip?AGO.Menu.Tooltip(e):"function"==typeof PAGE.Tooltip&&PAGE.Tooltip(e)},onKeydown:function(e){var t,n,a,o;if(o=!0,AGO.App.Ogame&&AGO.Init.activeOverlay&&((t=document.querySelectorAll("body > .ui-dialog .ui-dialog-content")).length?(n=t[t.length-1],a=DOM.getAttribute(n,null,"data-page").toLowerCase(),AGO.Init.activeOverlay={element:n.id,page:a}):AGO.Init.activeOverlay=null),AGO.Init.activeOverlay?(t=OBJ.get(AGO.App.Overlay,a))&&AGO[t]&&"function"==typeof AGO[t].onKeydown&&(o=AGO[t].onKeydown(e,n)):(AGO.Menu&&document.getElementById("ago_menu")?o=AGO.Menu.onKeydown(e):"function"==typeof PAGE.onKeydown&&(o=PAGE.onKeydown(e)),o&&AGO.App.OgameMain&&(o=AGO.Main.onKeydown(e))),!1===o&&!e.cached)try{e.preventDefault()}catch(e){}return o},onSwipe:function(e,t){AGO.Init.touch&&e&&(t<10&&"function"==typeof PAGE.onSwipe?PAGE.onSwipe(e,t):"function"==typeof AGO.Main.onSwipe&&AGO.Main.onSwipe(e,t))},Select:function(){var e,t;"getSelection"in window&&((e=window.getSelection()).rangeCount&&(t=e.toString())),!t&&document.activeElement&&("TEXTAREA"===(e=document.activeElement).tagName||"INPUT"===e.tagName&&"text"===e.type)&&(t=(e.value||"").substring(e.selectionStart,e.selectionEnd)),t&&5<=t.length&&(!AGO.App.OgameMain||t.length<60)&&((t=AGO.Task.parseTarget(t,1)).coords||t.time)&&(AGO.App.OgameMain?AGO.Option.is("I81")&&(t={action:"set",tab:"Target",token:81,coords:t.coordstype||t.coords,time:t.time,marked:1},AGO.Init.Messages("Token","Action",t)):(t=STR.check(t.coordstype||t.coords)+"|"+STR.check(t.time),AGB.message("Background","Set",{key:"Panel_Target",value:t})))},Timer:function(){5<AGO.Init.status&&AGO.App.OgameMain&&(AGO.Time.Display(),AGO.Planets.Timer(),1===AGO.Acc.type&&AGO.Units.Timer(),PAGE.Timer&&PAGE.Timer(),AGO.Jumpgate&&AGO.Jumpgate.Timer&&AGO.Jumpgate.Timer(),AGO.Main.updateTitle())},Timing:function(e){e?AGB.Log(e+(Date.now()-AGO.Init.timing-(Date.now()-AGO.Init.timingRange))+"   + "+(Date.now()-AGO.Init.timingRange)+" -- "+document.readyState):AGO.Init.timingRange=Date.now()},Location:function(e,t){window.setTimeout(function(){document.location.href=AGO.Uni.path+(e||"overview")},t||300)},Valid:function(e,t){var n;AGO.Init.status&&"function"==typeof e&&((n=new XMLHttpRequest).open("GET",AGO.Uni.url+"/game/index.php?page=fetchTechs&ajax=1",!0),n.overrideMimeType("text/html"),n.onerror=n.onload=function(){AGO.Init.status&&(200==+n.status&&STR.check(n.responseText)[0]===String.fromCharCode(123)?e():"function"==typeof t&&t())},n.send(null))},Script:function(e){var t,n;if(!AGO.Init.ogameScript){for(t=DOM.queryAll("#box > script",document.getElementById("boxBG")),n=0;n<t.length;n++)if(!t[n].src&&-1<(t[n].innerHTML||"").indexOf("var session")){AGO.Init.ogameScript=t[n];break}AGO.Init.ogameScript=AGO.Init.ogameScript||-1}return t="",OBJ.is(AGO.Init.ogameScript)&&(t=AGO.Init.ogameScript.innerHTML||"","production"===e)?0<(e=t.indexOf("initAjaxResourcebox"))&&(e=t.indexOf("{",e+30))<(n=t.indexOf("function",e))?(n=t.lastIndexOf("}",t.lastIndexOf("}",n)-1),t.slice(e,n+1)||""):"":t}},AGO.Background={Data:{},Get:function(e,t){var n;return n=e?AGO.Background.Data[e]:"",6===t?STR.check(n):+n||0},Set:function(e,t){e&&(AGO.Background.Data[e]=t,AGB.message("Background","Set",{key:e,value:t}))}},AGO.Observer={head:[null],body:[null],interactive:[null],mousedown:null,Start:function(){var e;e=document.onreadystatechange,document.onreadystatechange=function(){"interactive"===document.readyState&&(AGO.Observer.Call(AGO.Observer.body),AGO.Observer.Call(AGO.Observer.interactive));try{e()}catch(e){}},document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e,!1),AGO.Observer.Call(AGO.Observer.body),AGO.Observer.Call(AGO.Observer.interactive)},!1),window.addEventListener("blur",function(){AGO.Init.active=!1},!1),window.addEventListener("focus",function(){AGO.Init.active||(AGO.Init.active=!0,7<=AGO.Init.status&&AGO.Init.Refresh())},!1),window.addEventListener("beforeunload",function(){DOM.removeObserver(AGO.Observer.mutationObject),AGO.Init.status=0},!1),window.addEventListener("keydown",AGO.Observer.onKeydown,!0),window.addEventListener("ago_global_send",function(e){(e=OBJ.parse(e?e.detail:"")).page&&AGO.Init.Messages(e.page,e.role,e.data)},!1),AGO.isChrome&&chrome.runtime.onMessage.addListener(function(e){e&&e.player===AGO.App.keyPlayer&&AGO.Init.Messages(e.page,e.role,e.data)}),document.addEventListener("mousedown",function(e){var t;if(AGO.Observer.mousedown){for(e=e.target,t=0;t<9;t++){if(!e){t=9;break}if(e.id===AGO.Observer.mousedown.id)break;e=e.parentNode}9===t&&(e=AGO.Observer.mousedown.action,AGO.Observer.set("mousedown"),"function"==typeof e&&e())}},!1),document.addEventListener("mouseup",function(e){e.keyCode||e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||AGO.Init.Select()},!1),document.addEventListener("touchstart",function(e){var t,n;AGO.Observer.area=0,e&&e.target&&1===e.touches.length&&(AGO.Observer.startX=AGO.Observer.pageX=n=e.touches[0].pageX,AGO.Observer.startY=AGO.Observer.pageY=e.touches[0].pageY,t=Math.floor((+document.body.clientWidth||1)/2),e.touches[0].screenX<40||DOM.findParent(e.target,null,"ago_panel",8)?AGO.Observer.area=12:AGO.Observer.area=t-335<n&&n<t+335?window.innerWidth<950?0:DOM.findParent(e.target,null,"inhalt",9)?1:0:t+330<n&&DOM.findParent(e.target,null,"planetList",9)?15:n<t-280&&DOM.findParent(e.target,null,"links",9)?11:0,AGO.Observer.area&&(window.setTimeout(function(){Math.abs(AGO.Observer.startX-AGO.Observer.pageX)<10&&Math.abs(AGO.Observer.startY-AGO.Observer.pageY)<10&&(AGO.Observer.area=0)},120),window.clearTimeout(AGO.Observer.touchTimeout),AGO.Observer.touchTimeout=window.setTimeout(function(){AGO.Observer.area=0},1e3)))},!1),document.addEventListener("touchmove",function(e){var t,n;AGO.Observer.area&&(AGO.Observer.pageX=e.touches[0].pageX,AGO.Observer.pageY=e.touches[0].pageY,!window.scrollX||0<AGO.Observer.startX-AGO.Observer.pageX)&&(t=Math.abs(AGO.Observer.startX-AGO.Observer.pageX)+1,n=Math.abs(AGO.Observer.startY-AGO.Observer.pageY)+1,(t=1===AGO.Observer.area&&(3<t||3<n)&&t/n<.35)?AGO.Observer.area=0:e.preventDefault())},!1),document.addEventListener("touchend",AGO.Observer.onSwipe,!1),document.addEventListener("touchcancel",AGO.Observer.onSwipe,!1)},Head:function(e){AGO.Init.status&&(document.body||!0===AGO.Observer.head[0]?e():(AGO.Observer.head[0]||(AGO.Observer.head[0]=DOM.addObserver(document,{childList:!0,subtree:!0},function(t){var n;OBJ.iterate(t,function(e){"BODY"===t[e].target.nodeName&&(n=!0)}),n&&AGO.Observer.Call(AGO.Observer.head)})),AGO.Observer.head.push(e)))},Body:function(e,t){AGO.Init.status&&("complete"===document.readyState||"interactive"===document.readyState||!0===AGO.Observer.body[0]?e():(t&&!AGO.Observer.body[0]&&(AGO.Observer.body[0]=DOM.addObserver(document,{childList:!0,subtree:!0},function(e){var t,n;for(t in e){if(e[t].target&&"box"===e[t].target.id&&"boxBG"===e[t].target.parentNode.id)for(var a=0;a<e[t].addedNodes.length;a++)"SCRIPT"===e[t].addedNodes[a].nodeName&&document.getElementById("rechts")&&(n=!0);if(n){AGO.Observer.Call(AGO.Observer.body);break}}})),AGO.Observer.body.push(e)))},Interactive:function(e){AGO.Init.status&&("complete"===document.readyState||"interactive"===document.readyState||!0===AGO.Observer.interactive[0]?e():AGO.Observer.interactive.push(e))},Call:function(e){var t;if(AGO.Init.status&&e&&"object"==typeof e&&!0!==e[0]){for(t=e[0],e[0]=!0,t&&DOM.removeObserver(t),t=1;t<e.length;t++)"function"==typeof e[t]&&e[t]();e.length=1}},set:function(e,t,n){AGO.Observer[e]=t&&n?{id:t,action:n}:null},onKeydown:function(e){return!(!(!e||!e.keyCode||e.altKey||e.ctrlKey&&(e.keyCode<37||40<e.keyCode))&&AGO.Option.is("U31"))||(112<=e.keyCode&&e.keyCode<=123&&AGO.Option.is("U32")&&(e.stopPropagation(),e.preventDefault()),AGO.Init.status<7?(AGO.Init.KeydownCache.push({cached:!0,keyCode:e.keyCode,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey}),!1):(e.target&&(e.inputType="TEXTAREA"===e.target.nodeName?12:"INPUT"===e.target.nodeName&&"text"===e.target.type?11:0),AGO.Init.onKeydown(e)))},Mutation:function(e){var t,n,a;for(n in e)if("BODY"===e[n].target.nodeName&&e[n].addedNodes)for(a=0;a<e[n].addedNodes.length;a++)if("DIV"===e[n].addedNodes[a].nodeName&&"dialog"===(t=e[n].addedNodes[a]).getAttribute("role"))return void AGO.Init.Overlay(t.querySelector(".ui-dialog-content"))},onSwipe:function(){var e,t,n,a;window.clearTimeout(AGO.Observer.touchTimeout),AGO.Init.touch&&AGO.Observer.area&&(e=AGO.Observer.startY-AGO.Observer.pageY,n=AGO.Observer.startX-AGO.Observer.pageX,(a=Math.abs(n||1)/Math.abs(e||1))<.35?1<AGO.Observer.area&&(e<=-100?t="down":100<=e&&(t="up")):3<a?n<=-(e=AGO.Observer.area<10?80:40)?t="right":e<=n&&(t="left"):.6<a&&a<1.4&&(e<=-70?t="diagDown":70<=e&&(t="diagUp")),AGO.Init.onSwipe(t,AGO.Observer.area))}},AGO.Global={Interactive:function(){AGO.App.Ogame&&AGO.Global.message({role:"Interactive",data:{commander:AGO.Option.is("commander"),galaxy:AGO.Acc.galaxy,page:AGO.App.page,timeStatus:AGO.Time.status,timeZoneDelta:AGO.Time.timeZoneDelta,U60:AGO.Option.is("U60"),U61:AGO.Option.isAnd("U60","U61"),U62:AGO.Option.get("U62",2),U65:AGO.Option.get("U65",2),U66:AGO.Option.get("U66",2),U67:AGO.Option.get("U67",2),B21:AGO.Option.get("B21",2),G30:AGO.Option.is("G30"),O51:AGO.Planets.improve,O53:AGO.Planets.enabled&&AGO.Option.is("O53"),F00:AGO.Option.is("F00"),F02:AGO.Option.get("F02",2)}})},message:function(e,t){var n;if(e&&(window.dispatchEvent(new window.CustomEvent("ago_global",{detail:JSON.stringify(e)})),"getProperty"===e.role||t)){n=DOM.getAttribute("ago_global_data","id","ago-data-"+(e.property||t));try{return JSON.parse(n)}catch(e){return""}}}},AGO.App={page:"",Page:"",pathSkin:"",title:"",mode:0,beta:0,versionOGame:"",versionOGameMax:AGO.versionOGameMax,Overlay:{jumpgatelayer:"Jumpgate",techtree:"Techtree",phalanx:"Phalanx",showmessage:"Showmessage",buddies:"Buddies",notices:"Notices",search:"Search"},Content:{resources:"Resources",station:"Station",traderoverview:"Trader",research:"Research",shipyard:"Shipyard",defense:"Defense",galaxycontent:"Galaxy",allianceoverview:"Alliance",alliancemanagement:"Alliance",alliancebroadcast:"Alliance",allianceapplications:"Alliance",premium:"Premium",shop:"Shop",eventlist:"Events",fetcheventbox:"Fleet",minifleet:"Fleet",tutorialmission:"Tutorial",messages:"Messages",highscorecontent:"Highscore"},Start:function(){var e,t;AGO.isFirefox?(AGO.App.pathSkin="chrome://skin/content/",OBJ.copy(OBJ.parse(API.App()),AGO.App)):(AGO.App.pathSkin=chrome.extension.getURL("/skin/"),AGO.App.versionAGO=chrome.runtime.getManifest().version,AGO.App.name=STR.check(chrome.runtime.getManifest().name)),AGO.App.beta=-1<AGO.App.name.indexOf("Alpha")?3:-1<AGO.App.name.indexOf("Beta")?1:0,AGO.Uni.domain=document.location.hostname.toLowerCase(),AGO.Uni.url="https://"+AGO.Uni.domain,e=AGO.Uni.domain.split("."),document.location.href.match(/https:\/\/.+\.ogame.gameforge.com\/game\/index\.php\?+.*page=*/i)?(AGO.App.page=STR.getParameter("page",document.location.href).toLowerCase(),AGO.App.page=0===AGO.App.page.indexOf("fleet")&&STR.getParameter("cp",document.location.href)?"fleet1":AGO.App.page,AGO.Uni.path=document.location.href.split("?")[0]+"?page=",t=(e[0]||"").split("-"),AGO.Uni.lang=(t[1]||"EN").toUpperCase(),AGO.Uni.number=NMR.parseIntAbs(t[0]),AGO.Uni.number&&(AGO.App.mode=3,AGO.Uni.abbr="UNI"+AGO.Uni.number,AGO.App.keyCom="AGO_"+AGO.Uni.lang,AGO.App.keyUni=AGO.App.keyCom+"_"+AGO.Uni.abbr,OBJ.copy(OBJ.parse(AGO.Data.getStorage(AGO.App.keyUni+"_App")),AGO.App),AGO.App.title=AGO.App.title||AGO.Uni.lang+" "+AGO.Uni.number,!AGO.App.playerId||STR.getParameter("phpsessid",document.location.href.toLowerCase())?AGO.App.login=AGO.App.reload=!0:AGO.App.keyPlayer=AGO.App.keyUni+"_"+AGO.App.playerId),AGO.App.disabled&&AGO.Notify.set("Problem",21),4!==e.length&&AGO.Notify.set("Problem",31)):(AGO.App.page=-1<AGO.Uni.domain.indexOf("speedsim.net")?"websim":-1<AGO.Uni.domain.indexOf("osimulate.com")?"osimulate":"",AGO.App.page&&(AGO.Uni.lang=(STR.getParameter("uni",document.location.href).split("_")[0]||"EN").toUpperCase(),AGO.App.keyCom="AGO_"+AGO.Uni.lang,AGO.App.mode=2))},Init:function(){var e,t,n;for(e=document.head.getElementsByTagName("meta"),n=0;n<e.length;n++)if(e[n].name)switch(t=e[n].getAttribute("content"),e[n].name){case"ogame-player-name":AGO.Acc.name=t;break;case"ogame-planet-coordinates":AGO.Acc.coords=t;break;case"ogame-planet-type":AGO.Acc.type="moon"===t?3:1;break;case"ogame-planet-id":AGO.Acc.planetId=t;break;case"ogame-planet-name":AGO.Acc.planetName=t;break;case"ogame-player-id":AGO.Acc.playerId=t;break;case"ogame-version":AGO.App.versionOGame=t;break;case"ogame-session":AGO.Acc.session=t;break;case"ogame-timestamp":AGO.Acc.timestamp=+t||0;break;case"AntiGameOrigin":AGO.App.twice=!0}AGO.App.init=!0,AGO.App.mode=AGO.App.twice?0:2===AGO.App.mode?2:AGO.Acc.playerId&&AGO.Acc.session?4:3,4<=AGO.App.mode&&(!AGO.App.login&&AGO.App.playerId&&AGO.App.playerId!==AGO.Acc.playerId?(AGO.Init.status=AGO.App.mode=0,AGO.Data.setStorage(AGO.App.keyUni+"_App","")):(AGO.App.Ogame=!0,OBJ.copy(AGO.Task.splitCoords(AGO.Acc.coords),AGO.Acc),AGO.Acc.coordstype=AGO.Acc.coords+":"+AGO.Acc.type,AGO.App.keyPlayer=AGO.App.keyUni+"_"+AGO.Acc.playerId,AGO.App.OgameMobile=!DOM.hasClass(document.body,null,"no-touch"),(AGO.App.login||AGO.App.playerId!==AGO.Acc.playerId||AGO.App.session!==AGO.Acc.session)&&(AGO.App.reload=!0,AGO.App.playerId=AGO.Acc.playerId,AGO.App.Save(),AGB.Log("App - Login:   Com: "+AGO.Uni.lang+"   Uni: "+AGO.Uni.number+"   Player: "+AGO.Acc.playerId+"   Session: "+AGO.Acc.session,!0)),e=document.createDocumentFragment(),DOM.append(e,"meta",{content:AGO.App.versionAGO,name:"AntiGameOrigin",id:"ago_global_data","ago-data-key":AGO.App.keyPlayer}),DOM.append(e,"script",{type:"text/javascript"}).textContent=AGB.Resource("js/global.js"),document.head.appendChild(e)))},Save:function(e){OBJ.copy(e,AGO.App),AGO.Data.setStorage(AGO.App.keyUni+"_App",{disabled:AGO.App.disabled,playerId:AGO.Acc.playerId,session:AGO.Acc.session,title:AGO.Uni.lang+" "+(AGO.Uni.name||AGO.Uni.number||"")})}},AGO.Uni={status:0,path:"",url:"",domain:"",lang:"",abbr:"",number:0,name:"",speed:1,speedFleet:1,galaxies:50,systems:499,positions:16,rapidFire:1,acs:1,defToTF:0,debrisFactor:.3,repairFactor:.7,newbieProtectionLimit:0,newbieProtectionHigh:0,topScore:0},AGO.Acc={name:"",coords:"",type:0,playerId:"",planetId:"",session:"",timestamp:0},AGO.Data={Init:function(){AGO.App.reload&&AGO.Data.removeStorage(AGO.App.keyPlayer+"_Fleet_Current")},Remove:function(t){function n(t){OBJ.iterate(window.localStorage,function(e){e&&0===e.indexOf(t||"AGO_")&&(window.localStorage.removeItem(e),AGB.Log("Delete - localstorage  - "+e,!0))})}AGB.Log("Delete - ############ - "+t,!0),AGB.message("Data","Remove",{mode:t},function(e){e&&(n("ago"===t?"AGO_":AGO.App.keyPlayer),n(AGO.App.keyUni),AGO.Init.Location("",600))})},setStorage:function(e,t){if(e)try{window.localStorage[e]=OBJ.is(t)?JSON.stringify(t):t||""}catch(e){AGB.Log("Data - Error set localstorage",!0)}},getStorage:function(e,t){if(e){if(!t)return window.localStorage[e]||"";try{return JSON.parse(window.localStorage[e]||"{}")}catch(e){return{}}}return t?{}:""},removeStorage:function(e){e&&(window.localStorage[e]="")}},window.top===window.self&&AGO.Init.Start(),console.log(AGO.Init);