AGO.Fleet1={filterContinue:"routine holdingtime expeditiontime union retreatAfterDefenderRetreat metal crystal deuterium preferResource arrivalUnion nameUnion coordsMarked arrivalMarked".split(" "),Messages:function(e,t){"Action"===e?PAGE.Action(t):"Continue"===e?PAGE.Continue():PAGE.lockedDisplay||"Display"===e&&PAGE.Display()},Read:function(){var a,o,e,t,n,s;o=AGO.Fleet1.Para={},(a=AGO.Units.Data).ships=a.shipsCivil=a.shipsCombat=a.capacity=0,OBJ.iterate(AGO.Item.Ship,function(e){a[e]=0}),PAGE.layout=AGO.Option.is("F01"),(e=document.getElementById("inhalt"))&&(a.page=AGO.App.page,DOM.iterate(e.querySelectorAll('#buttonz li[id^="button"]'),function(e){var t;t=STR.check(NMR.parseIntAbs(e.id)),e=DOM.getTextChild(".level",e,3),t in AGO.Item.Ship&&(a[t]=e,a.ships+=e,a.capacity+=e*AGO.Item[t].capacity)}),(t=e.querySelector(".fleetStatus #slots"))&&(2===(t=t.querySelectorAll("span.tooltip")).length&&(s=(DOM.getText(t[0]).split(":")[1]||"").trim().split("/"),AGO.Fleet.Set("Current",{fleets:+s[0]||0,fleetsSlots:+s[1]||0}),s=(DOM.getText(t[1]).split(":")[1]||"").trim().split("/"),AGO.Fleet.Set("Current",{expos:+s[0]||0,exposSlots:+s[1]||0})))),e&&AGO.Option.is("F00")&&(PAGE.enabled=!0,DOM.iterate(document.querySelectorAll('#buttonz .content > form input[type="hidden"]'),function(e){var t,a;(t=STR.trim(e.name))&&(a=NMR.parseIntAbs(t),o[200<a?a:t]=+e.value||0)}),3<=(t=e.querySelectorAll("#fleetStatusBar li")).length&&(e=STR.trim(DOM.getText(t[1],null).split("]")[1]),o.planetName=1===o.type?e:"",o.moonName=3===o.type?e:"",o.playerHonor=AGO.Ogame.getPlayerHonor(DOM.getAttribute("span.honorRank",t[2],"class")),o.playerStatus=AGO.Token.getPlayerStatus('span[class^="status_abbr"]',t[2])||21,o.playerName=STR.trim(DOM.getText(t[2],null).split(":")[1])),-1<(e=STR.check(document.location.search)).indexOf("mission=")||-1<e.indexOf("routine=")?(n=STR.splitParameter(e),OBJ.iterate(n,function(e){var t=NMR.parseIntAbs(e);o[200<t?t:e]=+n[e]||0})):(e=AGO.Background.Get("Fleet_Task",6)||AGO.Fleet.Get("Current","Task1",6))&&OBJ.copy(OBJ.parse(e),o),AGO.Task.updateResources(o),AGO.Task.updateShips(o),a[210]&&(PAGE.Mission[6]=1),a[208]&&(PAGE.Mission[7]=1),a[209]&&(PAGE.Mission[8]=PAGE.Type[2]=1),a[214]&&(PAGE.Mission[9]=1),o.action=0,o.type=PAGE.Type.check(o.type)||AGO.Acc.type,AGO.Task.updateCoords(o,2),4===o.owncoords&&(o.type=0),o.mission=PAGE.Mission.check(o.mission),PAGE.Next=OBJ.create(o),PAGE.Next.mission=0,PAGE.Mini=AGO.Task.splitActive(AGO.Option.get("F31",-1),2,0),PAGE[1]={status:o.mission&&!o.routine?1:0},PAGE.Init(2),PAGE.Init(3),PAGE.Init(4),PAGE.Init(5),PAGE.Init(6),PAGE.Init(7),PAGE.Init(10),o.calculator=AGO.Fleet.Get("Current","Calculator"),o.calculator=PAGE.getRoutine(o.routine)?o.routine:1===o.mission?3:8===o.mission?4:o.mission||o.resources?2:PAGE.getRoutine(o.calculator)?o.calculator:2,AGO.Background.Set("Fleet_Task",""),AGO.Fleet.Set("Current","Task1","")),a=o=n=e=t=t=e=e=s=null},Init:function(e,t,a){function o(e){return AGO.Item.Ship[e]?(AGO.Item[e].metal+AGO.Item[e].crystal)/200:0}var n,s,i,r,c,p;switch(n=AGO.Units.Data,e){case 2:(s=PAGE[2]={group:1,label:AGO.Label.get("F60")}).mode=3,s.freight=0,OBJ.iterate(AGO.Item.Resource,function(e){s.freight+=Math.max(n[e]-PAGE.Mini[e],1)}),s.mission=AGO.Option.is("F54")?4:3,s.thirdShip=AGO.Item.check(AGO.Option.get("F63",6),AGO.Item.Ship),s.thirdShip=VAL.check(s.thirdShip,"202","203")?0:s.thirdShip,s.preferShip=["202","203"][AGO.Option.get("F62",2)]||s.thirdShip||"203",s.preferCargo="202"===s.preferShip?"202":"203",s.secondCargo="203"===s.preferCargo?"202":"203",s.need_smallCargo=Math.ceil(s.freight/5e3),s.need_largeCargo=Math.ceil(s.freight/25e3),s.need_thirdShip=Math.ceil(s.freight/AGO.Item[s.thirdShip||"209"].capacity),e="203"===s.preferCargo?s.need_largeCargo:s.need_smallCargo,s.status=e<=n[s.preferCargo]?3:s.need_smallCargo<=n[202]+5*n[203]?2:n.ships?1:0;break;case 3:(e=PAGE[3]={group:1,mode:AGO.Option.get("FA0"),label:AGO.Label.get("FA0"),status:n.ships?3:0}).preferShip=AGO.Option.is("FA2")?"202":"203";break;case 4:e=PAGE[4]={group:1,mode:AGO.Option.get("FH0"),label:AGO.Label.get("FH0"),status:n[209]?3:0};break;case 5:i=PAGE[5]=AGO.Task.splitActive(AGO.Option.get("F81",-1),1),t&&AGO.Fleet.Set("Routine",{Collect:1===t?"::::3:10::::1":2===t?a+"::::::2":""}),(p=AGO.Task.split(AGO.Fleet.Get("Routine","Collect",6),0,1)).routine&&(i.last=p.routine,p.routine=0,OBJ.iterate(p,function(e){p[e]&&(i[e]=p[e])})),1===i.last?AGO.Task.updateCoordsType(i,AGO.Acc.coords+":3"):(i.type=PAGE.Type.check(i.type)||1,AGO.Task.updateCoords(i,2)),i.group=2,i.mode=AGO.Option.get("F80"),i.label=AGO.Label.get("F80"),i.mission=4===i.mission?4:3,i.preferCargo="202"===i.preferCargo?"202":"203",i.secondCargo="203"===i.preferCargo?"202":"203",i.freight=0,OBJ.iterate(AGO.Item.Resource,function(e){i.freight+=Math.max(n[e]-i[e],1)}),i.need_smallCargo=Math.ceil(i.freight/5e3),i.need_largeCargo=Math.ceil(i.freight/25e3),e="203"===i.preferCargo?i.need_largeCargo:i.need_smallCargo,i.status=n.ships?i.owncoords<2||4<=i.owncoords?1:e<=n[i.preferCargo]?3:i.need_smallCargo<=n[202]+5*n[203]?2:1:0,i[i.preferCargo]=Math.min(e,n[i.preferCargo]),i[i.secondCargo]=n[i.preferCargo]<e?Math.ceil((e-n[i.preferCargo])*AGO.Item[i.preferCargo].capacity/AGO.Item[i.secondCargo].capacity):0;break;case 6:(r=PAGE[6]=AGO.Task.splitActive(AGO.Option.get("F91",-1),2,3,!0)).group=2,r.mode=AGO.Option.get("F90"),r.label=AGO.Label.get("F90"),t&&(t=1===t?"::::2:1::::1":"",AGO.Fleet.Set("Routine",{Save:t})),(p=AGO.Task.split(AGO.Fleet.Get("Routine","Save",6),0)).routine&&(r.last=p.routine,r.speed=p.speed||1),1===r.last&&(AGO.Task.updateCoordsType(r,AGO.Acc.coords+":2"),r.mission=8),e=r.mission,r.type=PAGE.Type.check(r.type)||1,r.mission=PAGE.Mission.check(r.mission),r.freight=0,OBJ.iterate(AGO.Item.Resource,function(e){r.freight+=Math.max(n[e]-r[e],1)}),r.status=n.capacity>r.freight&&(r.mission||!e)?3:n.ships?1:0,OBJ.iterate(AGO.Item.Ship,function(e){r[e]=0<r[e]?Math.max(n[e]-r[e],0):n[e]}),(e={6:"210",7:"208",8:"209",9:"214"}[r.mission])&&!r[e]&&(r[e]=1);break;case 7:(c=PAGE[7]=AGO.Task.splitActive(AGO.Option.get("F71",-1),0,3)).group=2,c.mode=AGO.Option.get("F70"),c.label=AGO.Label.get("F70"),c.position=16,c.rangeCoords=c.detail2,c.points=AGO.Ogame.chooseTopscore(2500,6e3,9e3,12e3,15e3,18e3,21e3,25e3),c.preferCargo="202"===c.preferCargo?"202":"203",c.secondCargo="203"===c.preferCargo?"202":"203",c.preferShip=AGO.Item.Ship[c.preferShip]?c.preferShip:"",t=c.points,1<=c.rangeCoords&&(c.next=AGO.Fleet.Get("Expo",AGO.Task.cutSystem(AGO.Acc.coords)),(c.next>c.system+c.rangeCoords||c.next>AGO.Uni.systems||c.next<c.system-c.rangeCoords||c.next<1)&&(c.next=NMR.minMax(c.system-c.rangeCoords,1,AGO.Uni.systems),AGO.Fleet.Set("Expo",AGO.Task.cutSystem(AGO.Acc.coords),c.next)),c.system=c.next),AGO.Option.is("F73")&&n[210]&&(c[210]=1,t-=5),c.preferShip&&(e="204 205 206 207 215 211 213".split(" "),207<=+c.preferShip&&e.reverse(),e.unshift(c.preferShip),OBJ.iterateArray(e,function(e){!c.combatShip&&n[e]&&(c.combatShip=e)}),c.combatShip&&(c[c.combatShip]=1,t-=Math.ceil(o(c.combatShip)))),c[c.preferCargo]=Math.min(Math.ceil(t/o(c.preferCargo)),n[c.preferCargo]),(t-=Math.ceil(c[c.preferCargo]*o(c.preferCargo)))<=0?c.status=c.preferShip&&c.preferShip!==c.combatShip?2:3:(c.status=n.ships?1:0,c[c.secondCargo]=Math.min(Math.ceil(t/o(c.secondCargo)),n[c.secondCargo]));break;case 10:for(t=0;t<6;t++)(e=PAGE[10+t]=AGO.Task.split(AGO.Fleet.Get("Last",t,6),2,1)).status=e.coords&&n.ships?3:0;PAGE[10].group=3,PAGE[10].mode=AGO.Option.get("FL0"),PAGE[10].label=AGO.Label.get("FL0")}n=e=s=i=r=c=e=e=p=e=t=e=t=null},Run:function(){PAGE.enabled&&PAGE.Show()},Ready:function(){var e,t;e=PAGE.Para,PAGE.enabled&&(e.sendingEnabled=+AGO.Global.message({role:"getProperty",property:"sendingEnabled"})||0,2<=PAGE.getRoutine(e.calculator)?3<=PAGE.getRoutine(e.calculator,"mode")&&((t=AGO.Task.create(PAGE[e.calculator],0)).routine=0):1===PAGE.getRoutine(e.routine)?t=AGO.Task.create(e,2):AGO.Option.is("I83")&&AGO.Acc.coords===e.coords&&AGO.Panel.GetActive("Target","id",6)&&(t={arrival:AGO.Panel.GetActive("Target","time")},AGO.Task.updateCoordsType(t,AGO.Panel.GetActive("Target","coords",6))),PAGE.Action(t))},Timer:function(){DOM.updateText("ago_info_resources","id",AGO.Units.Data.resources,3)},Show:function(){function e(e,t,a){var o,n;(o={action:10})[t]=a,n=s[t]?a<=s[t]?"ago_color_lightgreen":1<=i.status?"ago_color_orange":"ago_color_darkorange":"ago_color_palered",e=DOM.appendLI(e,{"ago-data":JSON.stringify(o)},t,12),DOM.appendSPAN(e,n,a,2)}var s,i,t,a,o,n;(t=document.getElementById("inhalt"))&&(s=AGO.Units.Data,i=PAGE[2],DOM.extendClass(t,null,"ago ago_improve"),PAGE.showSummary(),(o=t.querySelector(".fleetStatus #slots"))&&AGO.Option.is("F03")&&DOM.setStyleDisplay(o.parentNode),o=t.querySelector("#buttonz .header"),DOM.appendSPAN(o,{id:"ago_info_combat"}),DOM.appendSPAN(o,{id:"ago_info_civil"}),n=AGO.Option.get("F02",2),DOM.iterate(t.querySelectorAll('#buttonz li[id^="button"]'),function(e){var t,a;a=STR.check(NMR.parseIntAbs(e.id)),e=e.querySelector(".level"),n&&a in AGO.Item.Ship&&e&&(t=document.createDocumentFragment(),VAL.check(n,1,3)&&DOM.appendSPAN(t,"ago_items_textName ago_items_text ago_text_background",a,11),VAL.check(n,2,3)&&DOM.appendSPAN(t,"ago_items_textInfo ago_items_text ago_text_background",AGO.Ogame.getShipSpeed(a),2),DOM.appendSPAN(t,{class:"ago_items_textCount ago_items_text ago_text_background",id:"anti_ship_"+a}),e.parentNode.parentNode.appendChild(t))}),(a=t.querySelector("#allornone .allornonewrap"))?(DOM.addEvents(a,null,{click:PAGE.onBriefing}),(o=a.querySelector(".send_all"))&&(DOM.setData(o,null,{action:11}),DOM.setData(".send_none",a,{action:13}),t=DOM.append(null,"span","send_most",null,null,null,{action:12}),DOM.appendA(t,{id:"sendmost",class:"tooltip js_hideTipOnMobile",title:AGO.Label.get("F37")}),DOM.after(o,t)),(o=a.querySelector("#continue"))&&(DOM.setData(o,null,{action:"continue"}),e(a=DOM.create("ul","ago_cargos"),"202",i.need_smallCargo),e(a,"203",i.need_largeCargo),DOM.after(o,a),o=o.firstElementChild,t=DOM.appendTABLE(null,"ago_continue",{width:"100%"}),a=DOM.appendTR(t),DOM.appendTD(a).id="ago_continue_coords",DOM.appendIMG(DOM.appendTD(a),"/cdn/img/layout/pixel.gif","14px").id="ago_continue_type",DOM.appendIMG(DOM.appendTD(a),"/cdn/img/layout/pixel.gif","17px").id="ago_continue_mission",o.style.lineHeight="18px",o.appendChild(t))):(a=DOM.append(null,"ul","ago_cargos"),DOM.appendSPAN(DOM.appendLI(a,null,"202",11),"ago_color_palered",i.need_smallCargo,2),DOM.appendSPAN(DOM.appendLI(a,null,"203",11),"ago_color_palered",i.need_largeCargo,2),DOM.appendSPAN(DOM.appendLI(a,null,i.thirdShip||"209",11),"ago_color_palered",i.need_thirdShip,2),DOM.appendChild(t.querySelector("#warning"),a))),PAGE.showShortcuts(),s=i=t=a=o=t=a=t=n=null},showSummary:function(){function e(e,t,a){(e=DOM.appendDIV(e)).textContent=AGO.Label.get(a),DOM.appendSPAN(e,{id:"ago_info_"+t})}function t(e,t){DOM.append(e,"input",{id:"ago_"+t,type:"text",class:"ago_keys_arrows",value:PAGE.Next[t]||"0"},null,{focus:PAGE.onCalculator,blur:PAGE.onCalculator},null,{id:t})}function a(e,t){return 0===e?"ago_color_blue":e===t?"ago_color_palered":e===t-1?"ago_color_orange":"ago_color_lightgreen"}var o,n,s,i,r,c,p,l,u;(o=document.getElementById("planet"))&&(AGO.Task.updateResources(PAGE.Para),n=document.createDocumentFragment(),i=a(s=AGO.Fleet.Get("Current","fleets"),r=AGO.Fleet.Get("Current","fleetsSlots")),(c=DOM.appendA(n,{href:AGO.Uni.path+"movement",title:AGO.Label.get("E10"),class:"ago_movement tooltip "+i})).textContent=AGO.Label.get("F21")+": "+s+"/"+r,i=a(s=AGO.Fleet.Get("Current","expos"),r=AGO.Fleet.Get("Current","exposSlots")),DOM.appendSPAN(c,i,AGO.Label.get("F22")+": "+s+"/"+r),PAGE.layout&&(o.appendChild(n),o.style.height="23px",n=document.createDocumentFragment()),s=DOM.appendDIV(n,{id:"ago_summary",class:"ago_routine_"+PAGE.Para.calculator,ago_display_status:AGO.Option.is("F13")?1:2}),DOM.addEvents(s,null,{click:PAGE.onCalculator,dblclick:PAGE.onCalculator,keyup:PAGE.onCalculator,mousedown:PAGE.onCalculator}),i=DOM.appendTABLE(s,null,null,PAGE.layout?[200,407,30]:[200,417,30]),r=DOM.appendTR(i),e(c=DOM.appendTD(r,"ago_info"),"resources","I27"),e(c,"capacity","F23"),e(c,"freight","F24"),e(c,"expo","F26"),(c=DOM.appendTD(r,{id:"ago_routine"})).colSpan=2,l=u=0,p=AGO.Label.get("F05")+": ",OBJ.iterateArray([2,3,4,5,6,7,10],function(e){var t;t="",u++,(2<=PAGE[e].mode||PAGE.Para.calculator===e)&&((3<u&&!l||7===u)&&(l=t="ago_routine_space"),t=DOM.appendDIV(c,t),t=DOM.appendA(t,{id:"ago_routine_"+e,class:"tooltip",title:p+PAGE[e].label},null,{routine:e}),DOM.appendSPAN(t,"ago_routine_check"),5!==e&&6!==e||(DOM.appendIMG(t,"","18px").className="ago_routine_last"))}),r=DOM.appendTR(i),t(c=DOM.appendTD(r,"ago_coords"),"galaxy"),t(c,"system"),t(c,"position"),i=DOM.appendA(c,{id:"ago_type"}),DOM.append(i,"span",AGO.Item.Type[1],null,null,null,{type:1,action:42}),DOM.append(i,"span",AGO.Item.Type[3],null,null,null,{type:3,action:42}),DOM.appendTD(r).id="ago_details",c=DOM.appendTD(r),DOM.appendA(c,"ago_display_arrow"),PAGE.showCalculator(s),PAGE.layout?DOM.appendChild(document.querySelector("#buttonz .allornonewrap"),n):o.appendChild(n)),o=n=s=i=r=c=s=r=p=i=l=u=null},showCalculator:function(a){function e(e){DOM.appendTD(e,"ago_calc_info").colSpan=3}function t(e,t,a,o,n,s){t&&t.coords&&(o=AGO.Token.getClassHover(t.type)+(o?" "+AGO.Token.getClassSelected(t.type):""),e=DOM.appendA(e,"ago_target "+o,null,a),o=DOM.appendSPAN(e,"ago_target_coords",t.coords),2===n&&(a.target=1,DOM.setData(o,null,a)),DOM.appendIMG(DOM.appendSPAN(e,"ago_target_icon"),HTML.urlTypeIcon(t.type),"14px"),DOM.appendIMG(DOM.appendSPAN(e,"ago_target_icon"),HTML.urlMissionIcon(t.mission),"14px"),DOM.appendSPAN(e,"ago_target_speed",10*t.speed+"%"),n&&(a=t.routine?"R":"",DOM.appendSPAN(e,"ago_target_name",a),DOM.appendSPAN(e,"ago_target_ships",t.ships,2),DOM.appendSPAN(e,"ago_target_res",t.resources,2)),2<=s&&DOM.appendSPAN(e,"ago_routine_check ago_routine_check_"+s))}function o(e,t){var a;a=DOM.appendTD(e,"ago_calc_available"),a=DOM.appendA(a,null,null,{action:28,id:t}),DOM.appendSPAN(a,"ago_calc_available_icon "+t," "),DOM.appendSPAN(a,{id:"ago_calc_available_"+t})}function n(e,t){DOM.append(DOM.appendTD(e),"input",{id:"ago_calc_resource_"+t,type:"text",class:"ago_keys_arrows",value:PAGE.Next[t]||"0"},null,{focus:PAGE.onCalculator,blur:PAGE.onCalculator},null,{id:t})}function s(e,t,a,o){e=DOM.appendTD(e,"ago_calc_ships"),e=DOM.appendA(e,null,null,{action:19,id:a}),DOM.appendSPAN(e,"btn_blue",a,12),DOM.appendSPAN(e,{id:"ago_calc_ships_"+t})}function i(e,t,a){DOM.appendSPAN(DOM.appendTD(e,"",a,10),{id:t})}function r(t){return t.status&&(OBJ.iterate(AGO.Item.Resource,function(e){t[e]&&t[e]>AGO.Units.Data[e]&&(t.status=2)}),OBJ.iterate(AGO.Item.Ship,function(e){t[e]&&t[e]>AGO.Units.Data[e]&&(t.status=1)})),t.status}var c,p,l,u,d,A,O,g,G,_,m,h,M;for(A=2===(d=PAGE.Para.calculator),O=4===d,g=3===d,3<=PAGE[d].mode&&AGO.Fleet.Set("Current",{Calculator:d}),a||(c=document.getElementById("ago_calc"),(a=c.parentNode).removeChild(c),DOM.updateClass("ago_summary","id","ago_routine_"+d)),r(PAGE[10]),OBJ.iterateArray([2,4,3,5,6,7,10],function(e){var t;(t=a.querySelector("#ago_routine_"+e))&&(DOM.setClassGroup(t.parentNode,null,"selected",e===d?"selected":""),DOM.setClassGroup(t,null,"on",PAGE[e].status?"on":"off"),3!==e&&4!==e&&DOM.updateClass(".ago_routine_check",t,"ago_routine_check ago_routine_check_"+PAGE[e].status),(5===e||6===e)&&(e=1===PAGE[e].last?HTML.urlTypeIcon(PAGE[e].type||2,"b"):2===PAGE[e].last?HTML.urlMissionIcon(PAGE[e].mission):HTML.urlTypeIcon(0),DOM.updateAttribute(".ago_routine_last",t,"src",e)))}),DOM.setStyleDisplay(".ago_info div:nth-child(3)",a,g||7===d?"":"block"),DOM.setStyleDisplay(".ago_info div:nth-child(4)",a,7===d?"block":""),p=a.querySelector("#ago_details"),DOM.replaceChildren(p),c=DOM.appendTABLE(null,{id:"ago_calc"},null,PAGE.layout?[200,146,146,146]:[200,149,149,149]),_=DOM.appendTR(c),g||O?DOM.appendTD(_):i(_,"ago_calc_available_total","I23"),m=DOM.appendTR(c),l=DOM.appendTD(m),A&&(DOM.appendA(l,"ago_calc_resource_all",null,{action:21}),DOM.appendA(l,"ago_calc_resource_most",null,{action:22})),DOM.appendA(l,"ago_calc_resource_none",null,{action:23}),g&&(u=DOM.appendA(l,{id:"ago_calc_plunder"}),OBJ.iterateArray([50,75,100],function(e){DOM.appendSPAN(u,"ago_calc_plunder",e+"%").setAttribute("ago-data",'{"plunder":'+e+"}")})),l=DOM.appendTR(c),DOM.appendTD(l,"ago_calc_spacer"),DOM.appendTD(l,"ago_calc_spacer").colSpan=3,h=DOM.appendTR(c),l=DOM.appendTD(h,"ago_calc_speed"),u=DOM.appendA(l,{id:"speedLinks"}),G=1;G<=10;G++)(l=u.appendChild(document.createElement("span"))).textContent=10*G,l.setAttribute("data-value",G),l.setAttribute("ago-data",'{"speed":'+G+"}");if(i(G=DOM.appendTR(c,"ago_calc_consumption"),"ago_calc_consumption_total","F67"),i(M=DOM.appendTR(c,"ago_calc_duration"),"ago_calc_duration_total","F65"),10===d)for(t(p,PAGE[10],{routine:10,last:0},0===PAGE[10].last,2,PAGE[10].status),(l=DOM.appendTD(_,"ago_last")).colSpan=3,l.rowSpan=6,G=1;G<6;G++)(p=r(PAGE[10+G]))&&t(l,PAGE[10+G],{routine:10,last:G},PAGE[10].last===G,2,p);else 7===d?(e(_),e(m),e(h),e(G),e(M)):((A||g||O)&&(o(_,"metal"),o(_,"crystal"),O?DOM.appendTD(_):o(_,"deuterium"),n(m,"metal"),n(m,"crystal"),O?DOM.appendTD(m):n(m,"deuterium")),O?(s(h,"shipC","209"),DOM.appendTD(h,"ago_calc_ships"),DOM.appendTD(h,"ago_calc_ships"),i(G,"ago_calc_consumption_shipC"),DOM.appendTD(G),DOM.appendTD(G),i(M,"ago_calc_duration_shipC"),DOM.appendTD(M),DOM.appendTD(M)):5===d?(p&&(PAGE[5].last?(1===PAGE[5].last?t(p,{mission:PAGE[5].mission,speed:PAGE[5].speed,type:3,coords:" "},null,!0):t(p,PAGE[5],null,!0),DOM.appendA(p,"ago_target_reset btn_blue",null,{routine:5,last:-1}).textContent=AGO.Label.get("F39")):t(p,{mission:3,speed:10,type:3,coords:" "},{routine:5,last:1})),DOM.appendTD(_).colSpan=3,DOM.appendTD(m).colSpan=3,(l=DOM.appendTD(h)).colSpan=3,(l=DOM.appendTD(G)).colSpan=3,(l=DOM.appendTD(M)).colSpan=3):6===d?(p&&(PAGE[6].last?(t(p,{mission:8,speed:PAGE[6].speed,type:2,coords:" "}),DOM.appendA(p,"ago_target_reset btn_blue",null,{routine:6,last:-1}).textContent=AGO.Label.get("F39")):t(p,{mission:8,speed:1,type:2,coords:" "},{routine:6,last:1})),DOM.appendTD(_).colSpan=3,DOM.appendTD(m).colSpan=3,(l=DOM.appendTD(h)).colSpan=3,(l=DOM.appendTD(G)).colSpan=3,(l=DOM.appendTD(M)).colSpan=3):(s(h,"shipA","202"),s(h,"shipB","203"),A&&PAGE[2].thirdShip?s(h,"shipC",PAGE[2].thirdShip):DOM.appendTD(h,"ago_calc_ships"),i(G,"ago_calc_consumption_shipA"),i(G,"ago_calc_consumption_shipB"),A?i(G,"ago_calc_consumption_shipC"):DOM.appendTD(G),i(M,"ago_calc_duration_shipA"),i(M,"ago_calc_duration_shipB"),A?i(M,"ago_calc_duration_shipC"):DOM.appendTD(M)));DOM.appendChild(a,c),c=l=l=l=u=A=O=G=null},showShortcuts:function(){function e(e,t){var a,o;t&&((o=(a=DOM.appendA(e,{class:AGO.Token.getClassHover(t.type,t.owncoords),rel:AGO.Task.join(t,0)},{click:PAGE.onShortcuts,dblclick:PAGE.onShortcuts})).appendChild(document.createElement("span"))).className="ago_shortcuts_coords",o.textContent=t.galaxy||t.system||t.position?(t.galaxy||"- ")+":"+(t.system||" - ")+":"+(t.position||" -"):"",(o=a.appendChild(document.createElement("span"))).className="ago_shortcuts_icon",DOM.appendIMG(o,HTML.urlTypeIcon(t.type),"14px"),(o=a.appendChild(document.createElement("span"))).className="ago_shortcuts_icon",DOM.appendIMG(o,HTML.urlMissionIcon(t.mission),"14px"),(o=a.appendChild(document.createElement("span"))).className="ago_shortcuts_speed",o.textContent=0<t.speed&&t.speed<10?10*t.speed+"%":"")}var t,a,o,n,s,i,r;if(t=document.getElementById("inhalt")){if(a=DOM.appendDIV(null,{id:"ago_shortcuts",ago_display_status:AGO.Option.is("F14")?1:2}),(o=DOM.appendDIV(a,"ago_shortcuts_header")).addEventListener("click",PAGE.onShortcuts,!1),DOM.appendA(o,"ago_display_arrow"),o=DOM.appendTABLE(a,"ago_shortcuts_content",{width:"637",margin:"0px auto"},[256,18,365]),o=DOM.appendTR(o),n=DOM.appendTD(o,"ago_shortcuts_target"),DOM.appendSPAN(n,"ago_shortcuts_description","F40",10),s=NMR.minMax(AGO.Option.get("FL2",2),0,6)){for(r=0;r<s;r++)PAGE.getRoutine(10+r,"galaxy")&&e(n,PAGE[10+r]);DOM.appendSPAN(n,"ago_shortcuts_space")}for(s="F41 F42 F43 F44 F45 F46 F47 F48 F49".split(" "),r=0;r<s.length;r++)(i=AGO.Option.get(s[r],-1))&&e(n,AGO.Task.splitActive(i,0,4));n=DOM.appendTD(o,"ago_shortcuts_spacer"),n=DOM.appendTD(o,"ago_shortcuts_own"),DOM.set(n,null,null,null,{mouseover:PAGE.onShortcuts,mouseout:PAGE.onShortcuts}),DOM.appendSPAN(n,"ago_shortcuts_description"),AGO.Planets.iterate(1,function(e){var t,a;t=DOM.appendA(n,{rel:e.coords},{click:PAGE.onShortcuts,dblclick:PAGE.onShortcuts}),DOM.appendSPAN(t,"ago_shortcuts_coords",e.coords),DOM.appendSPAN(t,"ago_shortcuts_name",e.name),a=DOM.appendSPAN(t,"ago_shortcuts_moon"),(e=AGO.Planets.Data[e.moon])&&(DOM.appendIMG(a,e.img||HTML.urlTypeIcon(3),"18px"),DOM.appendTEXT(a,e.name)),a=DOM.appendSPAN(t,"ago_shortcuts_debris"),DOM.appendIMG(a,HTML.urlTypeIcon(2),"18px")}),DOM.before(t.querySelector("#buttonz .content .footer"),a)}t=a=o=o=n=s=null},Display:function(){function e(e,t){var a=!e||t<0?"":t<=e?"ago_color_green":"ago_color_palered";DOM.updateText("ago_info_capacity","id",e,3),DOM.updateClass("ago_info_capacity","id",a)}function t(e){return PAGE.Mission[e]&&(2===s.type?8===e&&s[209]:8!==e&&(15===e?16===s.position:s.owncoords&&(s.owncoords<3||n.stopActiveSelection)?VAL.check(e,3,4):6===e?s[210]:7===e?s[208]:9===e?s[214]&&(3<=s.owncoords||3===s.type):4!==e||s.owncoords))?e:0}function a(e,t){return AGO.Planets.ByCoords[e]?2===t?1:e!==AGO.Acc.coords?2:t===AGO.Acc.type?4:3:0}var o,n,s,i,r,c,p;if(o=AGO.Units.Data,n=PAGE.Next,(i=document.getElementById("inhalt"))&&7<=AGO.Init.status){if(n.routine=r=PAGE.Para.calculator,DOM.iterate(i.querySelectorAll(".fleetValues"),function(e){var t;t=STR.check(NMR.parseIntAbs(e.id)),e=+e.value||0,t in AGO.Item.Ship&&(e!==n[t]&&AGO.Option.is("F02")&&(DOM.updateText("anti_ship_"+t,"id",e?o[t]-e:0,2),DOM.setStyleColor("anti_ship_"+t,"id","#00B000")),n[t]=e)}),n.distance=AGO.Ogame.getFleetDistance(AGO.Acc,n),AGO.Task.updateShips(n,n.distance),c=2!==r||n.resources||AGO.Option.is("F51"),(s=OBJ.create(n)).type=s.type||(3===r?PAGE.Type.check(AGO.Option.get("FA1",2)):0)||AGO.Acc.type,s.owncoords=a(s.coords,s.type),s.ships){switch(s.status=PAGE.getRoutine(r,"status"),16===s.position?c&&(s.mission=15,s.type=1,s.owncoords&&(s.owncoords=1)):s.ships===s[210]?s.owncoords&&(s.owncoords<3||n.stopActiveSelection)?s.mission=4:!s.mission&&AGO.Option.is("F53")&&(s.mission=1===s.ships?1:6):s.ships!==s[209]||n.stopAutoHarvest||n.resources||!AGO.Option.is("F52")||1!==PAGE.getRoutine(r)||(s.mission=8,s.type=2,s.owncoords&&(s.owncoords=a(s.coords,s.type))),r){case 2:n.resources?(s.mission=(s.owncoords?0:3)||VAL.select(s.mission,3,4)||VAL.select(PAGE.Para.mission,3,4),s.status=n.capacity>=n.consumption+n.resources?3:1):(s.mission=t(s.mission)||t(PAGE.Para.mission),s.status=0);break;case 3:s.mission=t(s.mission)||t(1),s.status=1!==s.mission&&2!==s.mission?0:s.status;break;case 4:s.type=s[209]?2:s.type,s.owncoords&&(s.owncoords=a(s.coords,s.type)),s.mission=t(s.mission)||t(8),s.status=8!==s.mission?0:s[209]*AGO.Item[209].capacity>=n.metal+n.crystal?3:1;break;case 5:s.mission=t(s.mission)||t(PAGE[5].mission),s.status=s.owncoords<2||!VAL.check(s.mission,3,4)?0:s.status;break;case 6:s.mission=t(s.mission)||t(PAGE[6].mission);break;case 7:s.type=1,s.owncoords&&(s.owncoords=a(s.coords,s.type)),s.mission=t(15),s.status=15!==s.mission?0:s.status;break;case 10:p=10+(+PAGE[10].last||0),s.status=PAGE.getRoutine(p,"status"),s.status&&(s.mission=t(s.mission)||t(PAGE[p].mission),n.routine=PAGE[p].routine||1)}s.mission||(s.mission=16===s.position?15:2===s.type&&s[209]?8:t(PAGE[2].mission)||3)}else s.status=s.mission=0;switch(s.typeActive=s.type,c&&s.owncoords&&(s.typeActive=2===s.type?s.type:AGO.Planets.GetByCoords(s.coords,"moon",6)?s.owncoords<3?s.type:1===AGO.Acc.type?3:1:1),DOM.updateValue('input[name="mission"]',i,s.mission,8),DOM.updateValue('input[name="type"]',i,s.type,8),DOM.iterateChildren(document.getElementById("ago_type"),function(e){var t,a;a=DOM.getAttribute(e,null,"ago-data",-2).type,(t=AGO.Item.Type[a])&&(a===s.type&&(t+=" selected"),3===r&&a===AGO.Option.get("FA1",2)&&(t+=" ago_calc_selected"),DOM.updateClass(e,null,t))}),r){case 2:n.resources?e(n.capacity,n.resources):n.ships?e(n.capacity,o.resources):e(o.capacity,o.resources),DOM.updateText("ago_info_freight","id",n.resources,3);break;case 4:e(s[209]*AGO.Item[209].capacity,n.resources),DOM.updateText("ago_info_freight","id",n.metal+n.crystal,3);break;case 5:p=PAGE[5].freight,n.ships?e(n.capacity-n.consumption,p):e(o.capacity,p),DOM.updateText("ago_info_freight","id",p,3);break;case 6:p=PAGE[6].freight,n.ships?e(n.capacity-n.consumption,p):e(o.capacity,p),DOM.updateText("ago_info_freight","id",p,3);break;case 7:n.ships?e(n.capacity-n.consumption,-1):e(n.capacity,-1),DOM.updateText("ago_info_expo","id",n.expoints,3),i=n.expoints>=PAGE[7].points?"ago_color_green":"ago_color_palered",DOM.updateClass("ago_info_expo","id",i);break;case 3:case 10:n.ships?e(n.capacity-n.consumption,o.resources):e(o.capacity,o.resources),DOM.updateText("ago_info_freight","id",0,3)}n.routine=s.status?n.routine:0,DOM.updateClass("ago_routine","id","ago_routine_status_"+s.status),DOM.updateText("ago_info_resources","id",o.resources,3),DOM.updateText("ago_info_civil","id",n.shipsCivil,3),DOM.updateText("ago_info_combat","id",n.shipsCombat,3),DOM.updateText("ago_continue_coords","id",s.coords),DOM.updateAttribute("ago_continue_type","id","src",HTML.urlTypeIcon(s.typeActive,"b")),DOM.updateAttribute("ago_continue_mission","id","src",HTML.urlMissionIcon(s.mission)),p=PAGE.Para.sendingEnabled?2!==r||n.resources?2<=s.status?2:1:2:0,DOM.updateAttribute("continue","id","ago-status",p,8),n.ships||DOM.updateClass("continue","id","off"),PAGE.displayShortcuts(s),PAGE.displayCalculator(),AGO.Init.Messages("Planets","Action",{mode:"select",coords:s.coords,type:s.typeActive})}PAGE.lockedDisplay=!1,o=n=s=i=r=c=p=i=null},displayCalculator:function(){function e(e,t){DOM.updateText("ago_calc_available_"+e,"id",t,3),DOM.updateClass("ago_calc_available_"+e,"id",t<0?"ago_color_palered":"")}function t(e,t){var a,o,n,s,i;t&&(o=AGO.Ogame.getFleetDuration(t,c.distance,c.speed),n=AGO.Ogame.getShipConsumption(t,c.distance,o),s=Math.max(0,Math.ceil(c.resources/(AGO.Item[t].capacity-Math.round(n)-1))),(a=document.getElementById("ago_calc_ships_"+e))&&(DOM.updateText(a,null,s,3)&&(i=s?r[t]>=s?"ago_color_lightgreen":"ago_color_palered":"ago_color_blue",DOM.updateClass(a,null,i)),a.parentNode.className=t===PAGE[PAGE.Para.calculator].preferShip?"ago_calc_selected":""),n=s?Math.round(n*s)+1:0,DOM.updateText("ago_calc_consumption_"+e,"id",n,3)&&(i=r.deuterium>n?"":"ago_color_palered",DOM.updateClass("ago_calc_consumption_"+e,"id",i)),DOM.updateText("ago_calc_duration_"+e,"id",o,18))}var r,c,a,o,n;r=AGO.Units.Data,c=PAGE.Next,document.getElementById("planet")&&2===DOM.getAttribute("ago_summary","id","ago_display_status",2)&&(n=0,(a=document.getElementById("speedLinks"))&&!DOM.hasClass(DOM.getChildren(a,c.speed-1),null,"selected")&&DOM.iterateChildren(a,function(e){e.className=++n===c.speed?"selected":""}),DOM.updateText("ago_calc_consumption_total","id",c.consumption,3),DOM.updateText("ago_calc_duration_total","id",c.duration,18),3===PAGE.Para.calculator?(o={50:n=0,75:1,100:2}[c.plunder]||0,(a=document.getElementById("ago_calc_plunder"))&&!DOM.hasClass(DOM.getChildren(a,o),null,"selected")&&DOM.iterateChildren(a,function(e){e.className=o===n++?"selected":""}),t("shipA","202"),t("shipB","203")):4===PAGE.Para.calculator?t("shipC","209"):(e("total",r.resources-c.resources),e("metal",r.metal-c.metal),e("crystal",r.crystal-c.crystal),e("deuterium",r.deuterium-c.deuterium-c.consumption),2===PAGE.Para.calculator&&(t("shipA","202"),t("shipB","203"),t("shipC",PAGE[2].thirdShip)),5===PAGE.Para.calculator&&DOM.updateText("ago_collect_coords","id",AGO.Fleet.Get("Routine","Collect",6))))},displayShortcuts:function(o){var e;(e=document.getElementById("ago_shortcuts"))&&DOM.iterateChildren(e.querySelector(".ago_shortcuts_own"),function(e){var t,a;"A"===e.nodeName&&(t=(a=e.getAttribute("rel"))===AGO.Acc.coords?AGO.Token.getClassHighlight(AGO.Acc.type):"",DOM.setClassGroup(e,null,"ago_highlight",t),t=a===o.coords?" "+AGO.Token.getClassSelected(o.typeActive,!0):"",DOM.setClassGroup(e,null,"ago_selected",t))}),e=null},Action:function(o){function e(t){var e;28===t.action?(e=t.id)in AGO.Item.Resource&&(i[e]=2!==a.calculator?0:i[e]?PAGE.lastActive==="ago_calc_resource_"+e?Math.max(s[e]-i[e],0):0:s[e],DOM.setValue("ago_calc_resource_"+e,"id",i[e],8)):t.action&&OBJ.iterate(AGO.Item.Resource,function(e){i[e]=21===t.action?AGO.Units.Data[e]:22===t.action?Math.max(AGO.Units.Data[e]-PAGE.Mini[e],0):23===t.action?0:+t[e]||0,DOM.setValue("ago_calc_resource_"+e,"id",i[e],8)})}function n(a){i.ships=0,OBJ.iterate(AGO.Item.Ship,function(e){var t;"212"!==e&&(t=12===a.action?Math.max(s[e]-PAGE.Mini[e],0):+a[e]||0,i[e]=Math.min(t,s[e]),i.ships+=i[e],t=t?s[e]-t:0,s[e]&&DOM.updateValue("ship_"+e,"id",i[e],0,"change"),DOM.updateText("anti_ship_"+e,"id",t,2),DOM.setStyleColor("anti_ship_"+e,"id",t<0?"#E41615":"#00B000"))})}var s,a,i,t,r,c,p,l,u;if(s=AGO.Units.Data,a=PAGE.Para,i=PAGE.Next,(t=document.getElementById("inhalt"))&&AGO.Init.status&&OBJ.hasProperties(o)){switch(PAGE.lockedDisplay=!0,(r=PAGE.getRoutine(o.routine)?o.routine:0)?(i.routine=i.mission=i.stopActiveSelection=0,1===PAGE.getRoutine(r)?(r!==a.calculator&&(i.stopAutoHarvest=2!==r,i.resources&&e({action:23}),2===i.type&&(i.type=0)),2<=PAGE.getRoutine(a.calculator)&&(n({action:o.speed=10}),AGO.Task.updateCoordsType(o,a.coordstype),4<=o.owncoords&&(i.type=o.type=0))):2<=PAGE.getRoutine(r)&&(i.resources&&e({action:23}),10===r?PAGE.getRoutine(r+(+o.last||0),"status")&&(PAGE[10].last=+o.last||0,c=o.target?0:2,o=AGO.Task.create(PAGE[r+PAGE[10].last],c),AGO.Task.updateResources(o),o.resources&&(o.action=20,e(o)),o.action=2===c?10:0):(PAGE.Init(r,o.last),(o=AGO.Task.create(PAGE[r],2)).action=10),o.speed=o.speed||10,10===o.action&&n(o)),a.calculator=r,PAGE.showCalculator()):(VAL.check(o.action,12,10)&&n(o),o.mission=PAGE.Mission.check(o.mission),VAL.check(o.action,41,42)&&((o.type||o.mission)&&(i.stopAutoHarvest=1),o.type&&(i.stopActiveSelection=1)),3<=o.owncoords&&(i.type=0,i.owncoords<3&&(o.type=0)),4===a.calculator&&(o.type=0)),o.type=PAGE.Type.check(o.type),AGO.Task.updateCoords(o,4),OBJ.iterate(AGO.Item.CoordinatesType,function(e){o[e]&&(i[e]=o[e],"type"!==e&&(DOM.setValue('input[name="'+e+'"]',t,o[e],8),DOM.setValue("ago_"+e,"id",o[e])))}),AGO.Task.updateCoords(i,3),i.owncoords&&(i.owncoords=AGO.Planets.owncoords(i.coords,i.type||AGO.Acc.type)),i.owncoords<3&&(i.stopActiveSelection=0),o.arrival&&(i.coordsMarked=o.coords||"",i.arrivalMarked=+o.arrival||0),OBJ.iterateArray(["holdingtime","expeditiontime","union","retreatAfterDefenderRetreat","preferResource"],function(e){i[e]=+o[e]||0}),VAL.check(o.plunder,50,75,100)&&(i.plunder=o.plunder),NMR.isMinMax(o.speed,1,10)&&(i.speed=o.speed,DOM.setValue('input[name="speed"]',t,i.speed,8)),VAL.check(o.action,20,21,22,23,28)&&e(o),AGO.Task.updateResources(i),o.recalculate=i.coords+":"+i.speed!==i.previousTarget&&i.resources||i.metal+":"+i.crystal+":"+i.deuterium!==i.previousResources&&("0:0:0"!==i.previousResources||i.resources),a.calculator){case 2:!function(){function e(e){var t=AGO.Ogame.getShipCapacity(e,o.distance,i.speed);s[e]&&0<t&&(o[e]=Math.min(Math.ceil(a/t),s[e]),a-=o[e]*t)}var t,a;t=PAGE[2].preferShip,19===o.action&&o.id in AGO.Item.Ship&&(t=o.id),i.mission=o.mission||i.mission,a=i.resources,(o.recalculate||19===o.action)&&(o.speed=i.speed,o.distance=AGO.Ogame.getFleetDistance(AGO.Acc,i),e(t),0<a&&"203"!==t&&e("203"),0<a&&"202"!==t&&e("202"),0<a&&t!==PAGE[2].thirdShip&&PAGE[2].thirdShip&&e(PAGE[2].thirdShip),0<a&&(o[t]+=Math.ceil(a/AGO.Ogame.getShipCapacity(t,o.distance,o.speed))),(VAL.check(o.action,21,22)||28===o.action&&"deuterium"===o.id)&&i.deuterium&&(AGO.Task.updateShips(o,o.distance),i.deuterium-=o.consumption,DOM.setValue("ago_calc_resource_deuterium","id",i.deuterium,8)),o.action=10,n(o)),t=a=null}();break;case 3:o.stop=o.owncoords&&41===o.action,AGO.Task.updateShips(o),o.ships&&(o.action=10,o[202]?0<(u=o[202]-s[202])&&(PAGE[3].status=2,o[202]=s[202],o[203]=Math.ceil(u/5),o[203]>s[203]&&(PAGE[3].status=1)):0<(u=o[203]-s[203])&&(PAGE[3].status=2,o[203]=s[203],o[202]=5*u,o[202]>s[202]&&(PAGE[3].status=1)),n(o));break;case 4:o.stop=2!==o.type&&42===o.action,l=i.metal+i.crystal,o.recalculate&&(p=AGO.Ogame.getFleetDistance(AGO.Acc,i),p=AGO.Ogame.getShipCapacity("209",p,i.speed),o[209]=Math.ceil(l/p),o.action=10,n(o));break;case 5:o.stop=!i.owncoords||2===i.type,i.mission=VAL.select(o.mission,3,4)||i.mission,2<=o.owncoords&&41===o.action&&(PAGE.Init(5,2,o.coordstype),PAGE.showCalculator());break;case 7:o.stop=VAL.check(o.action,11,12);break;case 6:i.mission=o.mission||i.mission;break;case 10:i.mission=o.mission||i.mission}if(o.stop)return void PAGE.Action({routine:2,action:13})}i.previousTarget=i.coords+":"+i.speed,i.previousResources=i.metal+":"+i.crystal+":"+i.deuterium,PAGE.Display(),s=a=i=t=r=c=null},Continue:function(){var t;DOM.hasClass("continue","id","on")&&(t={},DOM.addClass("continue","id","ago_selected_button"),DOM.addClass("ago_routine","id","ago_selected"),PAGE.Next.routine=PAGE.Next.routine||PAGE.getRoutine(1,"status"),OBJ.iterateFilter(PAGE.Next,function(e){t[e]=PAGE.Next[e]},PAGE.filterContinue),AGO.Fleet.Set("Current",{Task2:JSON.stringify(t)}),window.setTimeout(function(){AGO.Init.status&&(DOM.removeClass("continue","id","ago_selected_button"),DOM.removeClass("ago_routine","id","ago_selected"))},1500))},getRoutine:function(e,t){return e&&PAGE[e]&&+PAGE[e][t||"group"]||0},Mission:{1:1,2:1,3:1,4:1,5:1,15:1,check:function(e){return this[e]?e:0}},Type:{1:1,3:1,check:function(e){return this[e]?e:0}},onKeydown:function(e){if(13===e.keyCode)return DOM.hasClass("continue","id","on")?DOM.click("#continue.on"):(DOM.click("#ago_routine_"+PAGE.Para.calculator),2<=PAGE.getRoutine(PAGE.Para.calculator)&&2<=PAGE.getRoutine(PAGE.Para.calculator,"status")&&DOM.click("#continue.on")),!1;if(12!==e.inputType){if(65===e.keyCode)return DOM.click("#sendall"),!1;if(77===e.keyCode)return DOM.click("span.send_most a"),!1;if(81===e.keyCode)return DOM.click("span.send_none a"),!1;if(84===e.keyCode)return DOM.click("#ago_routine_2"),!1;if(82===e.keyCode)return DOM.click("#ago_routine_4"),!1;if(83===e.keyCode)return DOM.click("#ago_routine_5"),!1;if(70===e.keyCode)return DOM.click("#ago_routine_6"),!1;if(69===e.keyCode)return DOM.click("#ago_routine_7"),!1;if(76===e.keyCode)return DOM.click("#ago_routine_10"),!1}return 11!==e.inputType||38!==e.keyCode&&40!==e.keyCode||!AGO.Item.Ship[STR.check(NMR.parseIntAbs(e.target.id))]&&!HTML.hasClass(e.target.className,"ago_keys_arrows")||DOM.changeInput(e,e.target)},onSwipe:function(e){"diagUp"===e&&DOM.click("span.send_none a"),"diagDown"===e&&DOM.click("span.send_most a"),"left"===e&&DOM.click('#menuTable .menubutton[href*="page=fleet1"]'),"right"===e&&PAGE.onKeydown({keyCode:13})},onBriefing:function(e){7<=AGO.Init.status&&("continue"===(e=DOM.getData(e.target,null,5)).action?DOM.hasClass("continue","id","on")||PAGE.Action({action:12}):e.action&&PAGE.Action(e))},onCalculator:function(e){var t,a,o,n;if(t=e&&e.target?e.type:"",a=DOM.getData(e.target,null,2),"click"===t&&(e.stopPropagation(),"ago_display_arrow"===e.target.className&&(o=1<DOM.getAttribute("ago_summary","id","ago_display_status",2)?1:2,DOM.setAttribute("ago_summary","id","ago_display_status",o,8),AGO.Option.set("F13",2!==o,1),PAGE.displayCalculator())),7<=AGO.Init.status&&t&&OBJ.hasProperties(a)){if(n=a.id,o=a.type||19===a.action,PAGE.timeoutCalculator)window.clearTimeout(PAGE.timeoutCalculator);else if("click"===t&&o)return!0;if("mousedown"===t){if(o){var s=JSON.stringify(a);PAGE.timeoutCalculator=window.setTimeout(function(){var e,t;PAGE.timeoutCalculator=null,t=(e=OBJ.parse(s)).id,19===e.action&&t in AGO.Item.Ship?(2===PAGE.Para.calculator&&(AGO.Option.set("F62","202"===t?0:"203"===t?1:2,2),PAGE.Init(2),PAGE.Action(e)),3===PAGE.Para.calculator&&(AGO.Option.set("FA2","202"===t,1),PAGE.Init(3),PAGE.Action(e))):VAL.check(e.type,1,3)&&3===PAGE.Para.calculator&&(t=AGO.Option.get("FA1",2)===e.type?0:e.type,AGO.Option.set("FA1",t,2),PAGE.Action(e))},1e3)}}else n in AGO.Item.Coordinates?(a[n]=o=NMR.parseIntAbs(e.target.value),"focus"===t&&o?(e.target.setAttribute("ago_value",o),o=0):"blur"!==t||o?o&&(o=AGO.Task.checkCoordsPart(o,n)):o=NMR.parseIntAbs(e.target.getAttribute("ago_value")),a[n]!==o&&(a[n]=o,e.target.value=STR.check(o)),PAGE.Action(a)):n in AGO.Item.Resource?("INPUT"===e.target.nodeName?("blur"===t&&PAGE.onActive(e.target.id),o=NMR.parseIntShortcut(e.target.value),t="click"!==t||o?"dblclick"===t?"":"blur"!==t||o?STR.check(o):"0":"",PAGE.Next[n]=+t||0,t!==e.target.value&&(e.target.value=t)):PAGE.Next[n]=DOM.getValue("ago_calc_resource_"+n,"id",3),PAGE.Action(a)):"click"===t&&(PAGE.Para.calculator!==a.routine||!PAGE.Next.ships||void 0!==a.last&&a.last!==PAGE[a.routine].last?(PAGE.Para.calculator===a.routine&&1===PAGE.getRoutine(a.routine)&&(1===DOM.getAttribute("ago_summary","id","ago_display_status",2)?(DOM.setAttribute("ago_summary","id","ago_display_status",2,8),PAGE.displayCalculator()):2!==a.routine||PAGE.Next.ships||PAGE.Next.resources||(a.action=22)),PAGE.Action(a)):DOM.click("#continue.on"))}t=a=o=t=o=n=null},onShortcuts:function(e){var t,a,o;!(a=e&&e.target?e.type:"")||AGO.Init.status<7||("click"===a&&e.currentTarget?"ago_shortcuts_header"===e.currentTarget.className?(t=1<DOM.getAttribute("ago_shortcuts","id","ago_display_status",2)?1:2,DOM.setAttribute("ago_shortcuts","id","ago_display_status",t,8),AGO.Option.set("F14",2!==t,1)):(t=e.currentTarget.rel||"",DOM.hasClass(e.currentTarget.parentNode,null,"ago_shortcuts_own")&&(t+=":"+("ago_shortcuts_moon"===(o="SPAN"===e.target.nodeName?e.target.className:e.target.parentNode.className)?3:"ago_shortcuts_debris"===o?2:1)),(e=AGO.Task.split(t,2,4)).routine=0,e.action=41,PAGE.Action(e)):"dblclick"===a?AGO.Option.is("U34")&&DOM.click("#continue"):("A"===e.target.nodeName?t=e.target:"SPAN"===e.target.nodeName?(o=e.target.className,t=e.target.parentNode):"SPAN"===e.target.parentNode.nodeName&&(o=e.target.parentNode.className,t=e.target.parentNode.parentNode),t&&"A"===t.nodeName&&DOM.setClassGroup(t,null,"ago_hover",AGO.Token.getClassHover("ago_shortcuts_moon"===o?3:"ago_shortcuts_debris"===o?2:1,"own"))))},onActive:function(e){PAGE.lastActive=e,window.setTimeout(function(){PAGE.lastActive=""},150)}},AGO.Task.updateShips=function(a,t){var o;OBJ.is(a)&&(a.consumption=1,a[212]=0,a.ships=a.shipsCivil=a.shipsCombat=a.capacity=a.expoints=a.minspeed=0,OBJ.iterate(AGO.Item.Ship,function(e){var t;(t=a[e])&&(e in AGO.Item.ShipCivil?a.shipsCivil+=t:a.shipsCombat+=t,a.ships+=t,a.capacity+=t*AGO.Item[e].capacity,a.expoints+=(AGO.Item[e].metal+AGO.Item[e].crystal)/200*t,t=AGO.Ogame.getShipSpeed(e),(!a.minspeed||t<a.minspeed)&&(a.minspeed=t,o=e))}),t&&(a.duration=AGO.Ogame.getFleetDuration(o,t,a.speed),OBJ.iterate(AGO.Item.Ship,function(e){a[e]&&(a.consumption+=a[e]*AGO.Ogame.getShipConsumption(e,t,a.duration))}),a.consumption=Math.round(a.consumption)))};